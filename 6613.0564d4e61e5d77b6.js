"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[6613],{6613:(qe,U,a)=>{a.r(U),a.d(U,{DfServiceDetailsComponent:()=>Y});var v,Z=a(97582),f=a(96814),c=a(56223),P=a(75986),C=a(3305),l=a(64170),u=a(2032),x=a(98525),S=a(82599),R=a(74104),w=a(42346),e=a(65879),g=a(32296),h=a(45597),b=a(90590),_=a(92596),F=a(78791),Q=a(24630),B=a(27921),A=a(37398),E=a(15711),N=a(81896),M=a(23680);function q(n,i){if(1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.schema.label)}}function j(n,i){if(1&n&&e._UZ(0,"input",7),2&n){const t=e.oxw(2);e.Q6J("formControl",t.control)("type","integer"===t.schema.type?"number":"password"===t.schema.type?"password":"text"),e.uIk("aria-label",t.schema.label)}}function z(n,i){if(1&n&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.label," ")}}function G(n,i){if(1&n&&(e.TgZ(0,"mat-select",8),e.YNc(1,z,2,2,"mat-option",9),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("multiple","multi_picklist"===t.schema.type)("formControl",t.control),e.xp6(1),e.Q6J("ngForOf",t.schema.values)}}function H(n,i){if(1&n&&e._UZ(0,"fa-icon",11),2&n){const t=e.oxw(2);e.Q6J("icon",t.faCircleInfo)("matTooltip",t.schema.description)}}const V=function(){return["integer","string","password","text"]},$=function(){return["picklist","multi_picklist"]};function X(n,i){if(1&n&&(e.TgZ(0,"mat-form-field",3),e.YNc(1,q,2,1,"mat-label",1),e.YNc(2,j,1,3,"input",4),e.YNc(3,G,2,3,"mat-select",5),e.YNc(4,H,1,2,"fa-icon",6),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.showLabel),e.xp6(1),e.Q6J("ngIf",e.DdM(4,V).includes(t.schema.type)),e.xp6(1),e.Q6J("ngIf",e.DdM(5,$).includes(t.schema.type)),e.xp6(1),e.Q6J("ngIf",t.schema.description)}}function K(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"input",12,13),e.NdJ("change",function(r){e.CHM(t);const m=e.oxw();return e.KtG(m.handleFileInput(r))}),e.qZA(),e.TgZ(3,"button",14),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(2);return e.KtG(r.click())}),e._uU(4),e.qZA(),e._uU(5),e.ALo(6,"transloco"),e.BQk()}if(2&n){const t=e.oxw();let o;e.xp6(3),e.Q6J("matTooltip",null!==(o=t.schema.description)&&void 0!==o?o:""),e.xp6(1),e.hij(" ",t.schema.label," "),e.xp6(1),e.hij(" ",t.control.value?t.control.value.name:e.lcZ(6,3,"noFileSelected"),"\n")}}function W(n,i){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.schema.label)}}function ee(n,i){if(1&n&&(e.TgZ(0,"mat-slide-toggle",15),e.YNc(1,W,2,1,"ng-container",1),e.qZA()),2&n){const t=e.oxw();let o;e.Q6J("formControl",t.control)("matTooltip",null!==(o=t.schema.description)&&void 0!==o?o:""),e.uIk("aria-label",t.schema.label),e.xp6(1),e.Q6J("ngIf",t.showLabel)}}function te(n,i){if(1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.schema.label)}}function ie(n,i){if(1&n&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ne(n,i){if(1&n&&(e.TgZ(0,"mat-form-field",3),e.YNc(1,te,2,1,"mat-label",1),e._UZ(2,"input",16),e.TgZ(3,"mat-autocomplete",null,17),e.YNc(5,ie,2,2,"mat-option",9),e.ALo(6,"async"),e.qZA()()),2&n){const t=e.MAs(4),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.showLabel),e.xp6(1),e.Q6J("formControl",o.control)("matAutocomplete",t),e.uIk("aria-label",o.schema.label),e.xp6(3),e.Q6J("ngForOf",e.lcZ(6,5,o.filteredEventList))}}const oe=function(){return["integer","password","string","string","picklist","multi_picklist","text"]};let T=((v=class{constructor(i,t){this.controlDir=i,this.activedRoute=t,this.showLabel=!0,this.faCircleInfo=b.DBf,this.control=new c.NI,i.valueAccessor=this}ngOnInit(){"event_picklist"===this.schema.type&&(this.activedRoute.data.subscribe(({systemEvents:i})=>{this.eventList=(0,E.H)(i.resource)}),this.filteredEventList=this.control.valueChanges.pipe((0,B.O)(""),(0,A.U)(i=>this.eventList.filter(t=>t.toLowerCase().includes(i.toLowerCase())))))}ngDoCheck(){this.controlDir.control instanceof c.NI&&this.controlDir.control.hasValidator(c.kI.required)&&this.control.addValidators(c.kI.required)}handleFileInput(i){const t=i.target;t.files&&this.control.setValue(t.files[0])}writeValue(i){this.control.setValue(i,{emitEvent:!1})}registerOnChange(i){this.onChange=i,this.control.valueChanges.subscribe(t=>this.onChange(t))}registerOnTouched(i){this.onTouched=i}setDisabledState(i){i?this.control.disable():this.control.enable()}}).\u0275fac=function(i){return new(i||v)(e.Y36(c.a5,10),e.Y36(N.gz))},v.\u0275cmp=e.Xpm({type:v,selectors:[["df-dynamic-field"]],inputs:{schema:"schema",showLabel:"showLabel"},standalone:!0,features:[e.jDz],decls:4,vars:5,consts:[["subscriptSizing","dynamic",4,"ngIf"],[4,"ngIf"],[3,"formControl","matTooltip",4,"ngIf"],["subscriptSizing","dynamic"],["matInput","",3,"formControl","type",4,"ngIf"],[3,"multiple","formControl",4,"ngIf"],["class","tool-tip-trigger","matSuffix","",3,"icon","matTooltip",4,"ngIf"],["matInput","",3,"formControl","type"],[3,"multiple","formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matSuffix","",1,"tool-tip-trigger",3,"icon","matTooltip"],["type","file",2,"display","none",3,"change"],["fileInput",""],["mat-flat-button","","color","primary",3,"matTooltip","click"],[3,"formControl","matTooltip"],["type","text","matInput","",3,"formControl","matAutocomplete"],["auto","matAutocomplete"]],template:function(i,t){1&i&&(e.YNc(0,X,5,6,"mat-form-field",0),e.YNc(1,K,7,5,"ng-container",1),e.YNc(2,ee,2,4,"mat-slide-toggle",2),e.YNc(3,ne,7,7,"mat-form-field",0)),2&i&&(e.Q6J("ngIf",e.DdM(4,oe).includes(t.schema.type)),e.xp6(1),e.Q6J("ngIf","file_certificate"===t.schema.type),e.xp6(1),e.Q6J("ngIf","boolean"===t.schema.type),e.xp6(1),e.Q6J("ngIf","event_picklist"===t.schema.type))},dependencies:[l.lN,l.KE,l.hX,l.R9,u.c,u.Nt,f.O5,x.LD,x.gD,M.ey,S.rP,S.Rr,c.UX,c.Fj,c.JJ,c.oH,f.ax,g.ot,g.lW,w.Ot,h.uH,h.BN,_.AV,_.gM,Q.Bb,Q.XC,Q.ZL,f.Ov],encapsulation:2}),v);T=(0,Z.gn)([(0,F.c)({checkProperties:!0})],T);var p,O,s=a(25313),J=a(95195),ae=a(75058);function ce(n,i){if(1&n&&e._UZ(0,"fa-icon",10),2&n){const t=e.oxw(2);e.Q6J("icon",t.faCircleInfo)("matTooltip",t.schema.description)}}function re(n,i){if(1&n&&(e.TgZ(0,"mat-card-header"),e._uU(1),e.YNc(2,ce,1,2,"fa-icon",9),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.schema.label),e.xp6(1),e.Q6J("ngIf",t.schema.description)}}function se(n,i){if(1&n&&e._UZ(0,"fa-icon",10),2&n){const t=e.oxw(3);e.Q6J("icon",t.faCircleInfo)("matTooltip",t.schema.description)}}function le(n,i){if(1&n&&(e.TgZ(0,"th",12),e._uU(1),e.YNc(2,se,1,2,"fa-icon",9),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.schema.label,""),e.xp6(1),e.Q6J("ngIf",t.schema.description)}}function me(n,i){if(1&n&&(e.TgZ(0,"td",13)(1,"mat-form-field",14),e._UZ(2,"input",15),e.qZA()()),2&n){const t=i.index,o=e.oxw(2);e.xp6(2),e.Q6J("formControl",o.controls[t]),e.uIk("aria-label",o.schema.label)}}function fe(n,i){if(1&n&&(e.ynx(0,11),e.YNc(1,le,3,2,"th",5),e.YNc(2,me,3,2,"td",6),e.BQk()),2&n){const t=e.oxw();e.Q6J("matColumnDef",t.schema.name)}}function pe(n,i){if(1&n&&(e.TgZ(0,"th",12),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.label," ")}}function de(n,i){if(1&n&&e._UZ(0,"df-verb-picker",20),2&n){const t=e.oxw(2).$implicit;e.Q6J("formControlName",t.name)("schema",t)}}function ue(n,i){if(1&n&&e._UZ(0,"df-dynamic-field",21),2&n){const t=e.oxw(2).$implicit;e.Q6J("showLabel",!1)("schema",t)("formControlName",t.name)}}function ge(n,i){if(1&n&&(e.TgZ(0,"td",13),e.ynx(1,17),e.YNc(2,de,1,2,"df-verb-picker",18),e.YNc(3,ue,1,3,"df-dynamic-field",19),e.BQk(),e.qZA()),2&n){const t=i.index,o=e.oxw().$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("formGroup",r.getFormGroup(t)),e.xp6(1),e.Q6J("ngIf","verb_mask"===o.type),e.xp6(1),e.Q6J("ngIf","verb_mask"!==o.type)}}function he(n,i){1&n&&(e.ynx(0,11),e.YNc(1,pe,2,1,"th",5),e.YNc(2,ge,4,3,"td",6),e.BQk()),2&n&&e.Q6J("matColumnDef",i.$implicit.name)}function _e(n,i){if(1&n&&e.YNc(0,he,3,1,"ng-container",16),2&n){const t=e.oxw();e.Q6J("ngForOf",t.schemas)}}function ve(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"th",12)(1,"button",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.add())}),e.ALo(2,"transloco"),e._UZ(3,"fa-icon",23),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.uIk("aria-label",e.lcZ(2,2,"newEntry")),e.xp6(2),e.Q6J("icon",t.faPlus)}}const ye=function(n){return{id:n}};function xe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td",13)(1,"button",24),e.NdJ("click",function(){const m=e.CHM(t).index,D=e.oxw();return e.KtG(D.remove(m))}),e.ALo(2,"transloco"),e._UZ(3,"fa-icon",23),e.qZA()()}if(2&n){const t=i.index,o=e.oxw();e.xp6(1),e.uIk("aria-label",e.xi3(2,2,"deleteRow",e.VKq(5,ye,t))),e.xp6(2),e.Q6J("icon",o.faTrashCan)}}function be(n,i){1&n&&e._UZ(0,"tr",25)}function De(n,i){1&n&&e._UZ(0,"tr",26)}let L=(O=p=class{updateDataSource(){this.dataSource=new s.by(this.fieldArray.controls)}constructor(i){this.fb=i,this.faPlus=b.r8p,this.faTrashCan=b.Vui,this.faCircleInfo=b.DBf}get controls(){return this.fieldArray.controls}ngOnInit(){this.initialize()}get schemas(){return"array"===this.schema.type?this.schema.items:[{name:"key",label:this.schema.object?.key.label,type:this.schema.object?.key.type},{name:"value",label:this.schema.object?.value.label,type:this.schema.object?.value.type}]}get displayedColumns(){const i="array"===this.schema.type?"string"===this.schema.items?[this.schema.name]:this.schemas.map(t=>t.name):["key","value"];return i.push("actions"),i}getFormGroup(i){return this.fieldArray.at(i)}createGroup(i){const t=this.fb.group({});return this.schemas.forEach(o=>{t.addControl(o.name,new c.NI(i?i[o.name]:o.default))}),i&&t.patchValue(i),t}initialize(){this.fieldArray=this.fb.array([])}writeValue(i){i&&Array.isArray(i)&&"array"===this.schema.type?this.fieldArray=this.fb.array(i.map("string"===this.schema.items?t=>new c.NI(t):t=>this.createGroup(t))):i&&"object"===this.schema.type&&(this.fieldArray=this.fb.array(Object.keys(i).map(t=>this.createGroup({key:t,value:i[t]})))),this.fieldArray.valueChanges.pipe((0,A.U)(t=>"object"===this.schema.type?t.reduce((o,r)=>(o[r.key]=r.value,o),{}):t)).subscribe(()=>{this.updateDataSource()})}registerOnChange(i){this.onChange=i,this.fieldArray.valueChanges.pipe((0,A.U)(t=>"object"===this.schema.type?t.reduce((o,r)=>(o[r.key]=r.value,o),{}):t)).subscribe(t=>{this.onChange(t),this.updateDataSource()})}registerOnTouched(i){this.onTouched=i}setDisabledState(i){i?this.fieldArray.disable():this.fieldArray.enable()}add(){this.fieldArray.push("string"===this.schema.items?new c.NI(""):this.createGroup())}remove(i){this.fieldArray.removeAt(i)}},p.\u0275fac=function(i){return new(i||p)(e.Y36(c.qu))},p.\u0275cmp=e.Xpm({type:p,selectors:[["df-array-field"]],inputs:{schema:"schema"},standalone:!0,features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>O),multi:!0}]),e.jDz],decls:11,vars:6,consts:[[4,"ngIf"],["mat-table","",3,"dataSource"],[3,"matColumnDef",4,"ngIf","ngIfElse"],["dynamic",""],["matColumnDef","actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","tool-tip-trigger","matSuffix","",3,"icon","matTooltip",4,"ngIf"],["matSuffix","",1,"tool-tip-trigger",3,"icon","matTooltip"],[3,"matColumnDef"],["mat-header-cell",""],["mat-cell",""],["subscriptSizing","dynamic",1,"full-width"],["matInput","","type","text",3,"formControl"],[3,"matColumnDef",4,"ngFor","ngForOf"],[3,"formGroup"],["type","number","class","full-width",3,"formControlName","schema",4,"ngIf"],["class","full-width",3,"showLabel","schema","formControlName",4,"ngIf"],["type","number",1,"full-width",3,"formControlName","schema"],[1,"full-width",3,"showLabel","schema","formControlName"],["type","button","mat-mini-fab","","color","primary",3,"click"],["size","lg",3,"icon"],["type","button","mat-mini-fab","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,t){if(1&i&&(e.TgZ(0,"mat-card"),e.YNc(1,re,3,2,"mat-card-header",0),e.TgZ(2,"table",1),e.YNc(3,fe,3,1,"ng-container",2),e.YNc(4,_e,1,1,"ng-template",null,3,e.W1O),e.ynx(6,4),e.YNc(7,ve,4,4,"th",5),e.YNc(8,xe,4,7,"td",6),e.BQk(),e.YNc(9,be,1,0,"tr",7),e.YNc(10,De,1,0,"tr",8),e.qZA()()),2&i){const o=e.MAs(5);e.xp6(1),e.Q6J("ngIf","string"!==t.schema.items),e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(1),e.Q6J("ngIf","string"===t.schema.items)("ngIfElse",o),e.xp6(6),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}},dependencies:[c.UX,c.Fj,c.JJ,c.JL,c.oH,c.sg,c.u,f.ax,l.lN,l.KE,l.R9,u.c,u.Nt,g.ot,g.nh,h.uH,h.BN,T,f.O5,s.p0,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,J.QW,J.a8,J.dk,_.AV,_.gM,w.Ot,ae.M,x.LD],styles:[".mat-column-actions[_ngcontent-%COMP%]{width:50px;padding:0 8px}.mat-column-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;width:30px}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}.mat-mdc-card[_ngcontent-%COMP%]{overflow-y:auto}"]}),p);L=O=(0,Z.gn)([(0,F.c)({checkProperties:!0})],L);var Ce=a(94517),Se=a(86806),I=a(24546),Ae=a(55799),Te=a(94664);const Ie=[{name:"adldap",label:"Active Directory",description:"A service for supporting Active Directory integration",group:"LDAP",configSchema:[]},{name:"ldap",label:"Standard LDAP",description:"A service for supporting Open LDAP integration",group:"LDAP",configSchema:[]},{name:"oidc",label:"OpenID Connect",description:"OpenID Connect service supporting SSO.",group:"OAuth",configSchema:[]},{name:"oauth_azure_ad",label:"Azure Active Directory OAuth",description:"OAuth service for supporting Azure Active Directory authentication and API access.",group:"OAuth",configSchema:[]},{name:"saml",label:"SAML 2.0",description:"SAML 2.0 service supporting SSO.",group:"SSO",configSchema:[]},{name:"okta_saml",label:"Okta SAML",description:"Okta service supporting SSO.",group:"SSO",configSchema:[]},{name:"auth0_sso",label:"Auth0 SSO",description:"Auth0 service supporting SSO.",group:"SSO",configSchema:[]},{name:"ibmdb2",label:"IBM DB2",description:"Database service supporting IBM DB2 SQL connections.",group:"Database",configSchema:[]},{name:"informix",label:"IBM Informix",description:"Database service supporting IBM Informix SQL connections.",group:"Database",configSchema:[]},{name:"oracle",label:"Oracle",description:"Database service supporting SQL connections.",group:"Database",configSchema:[]},{name:"salesforce_db",label:"Salesforce",description:"Database service with SOAP and/or OAuth authentication support for Salesforce connections.",group:"Database",configSchema:[]},{name:"soap",label:"SOAP Service",description:"A service to handle SOAP Services",group:"Remote Service",configSchema:[]},{name:"sqlanywhere",label:"SAP SQL Anywhere",description:"Database service supporting SAP SQL Anywhere connections.",group:"Database",configSchema:[]},{name:"sqlsrv",label:"SQL Server",description:"Database service supporting SQL Server connections.",group:"Database",configSchema:[]},{name:"memsql",label:"MemSQL",description:"Database service supporting MemSQL connections.",group:"Database",configSchema:[]},{name:"apns",label:"Apple Push Notification",description:"Apple Push Notification Service Provider.",group:"Notification",configSchema:[]},{name:"gcm",label:"GCM Push Notification",description:"GCM Push Notification Service Provider.",group:"Notification",configSchema:[]},{name:"mqtt",label:"MQTT Client",description:"MQTT Client based on Mosquitto.",group:"IoT",configSchema:[]},{name:"mysql",label:"MySQL",description:"Database service supporting MySLQ connections.",group:"Database",configSchema:[]},{name:"mariadb",label:"MariaDB",description:"Database service supporting MariaDB connections.",group:"Database",configSchema:[]},{name:"nodejs",label:"Node.js",description:"Service that allows client-callable scripts utilizing the system scripting.",group:"Script",configSchema:[]},{name:"php",label:"PHP",description:"Service that allows client-callable scripts utilizing the system scripting.",group:"Script",configSchema:[]},{name:"python",label:"Python",description:"Service that allows client-callable scripts utilizing the system scripting.",group:"Script",configSchema:[]},{name:"python3",label:"Python3",description:"Service that allows client-callable scripts utilizing the system scripting.",group:"Script",configSchema:[]},{name:"mongodb",label:"MongoDB",description:"Database service for MongoDB connections.",group:"Database",configSchema:[]},{name:"gridfs",label:"GridFS",description:"GridFS File Storage services.",group:"File",configSchema:[]}],k=[{name:"logstash",label:"Logstash",description:"Logstash service.",group:"Log",configSchema:[]},{name:"snowflake",label:"Snowflake",description:"Database service supporting Snowflake connections.",group:"Big Data",configSchema:[]},{name:"apache_hive",label:"Apache Hive",description:"The Apache Hive data warehouse software facilitates reading, writing, and managing large datasets residing in distributed storage using SQL",group:"Big Data",configSchema:[]},{name:"hadoop_hdfs",label:"Hadoop HDFS",description:"Hadoop Distributed File System",group:"File",configSchema:[]}];var y,Ze=a(73991),we=a(75911);function Fe(n,i){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.label," ")}}function Qe(n,i){if(1&n&&(e.TgZ(0,"mat-form-field",1)(1,"mat-label"),e._uU(2),e.ALo(3,"transloco"),e.qZA(),e._UZ(4,"input",12)(5,"fa-icon",4),e.ALo(6,"transloco"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"services.controls.namespace.label")),e.xp6(3),e.Q6J("icon",t.faCircleInfo)("matTooltip",e.lcZ(6,5,"services.controls.namespace.tooltip"))}}function Ne(n,i){if(1&n&&(e.TgZ(0,"mat-form-field",13)(1,"mat-label"),e._uU(2),e.ALo(3,"transloco"),e.qZA(),e._UZ(4,"input",14)(5,"fa-icon",4),e.ALo(6,"transloco"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"services.controls.label.label")),e.xp6(3),e.Q6J("icon",t.faCircleInfo)("matTooltip",e.lcZ(6,5,"services.controls.label.tooltip"))}}function Je(n,i){if(1&n&&(e.TgZ(0,"mat-form-field",15)(1,"mat-label"),e._uU(2),e.ALo(3,"transloco"),e.qZA(),e._UZ(4,"textarea",16)(5,"fa-icon",4),e.ALo(6,"transloco"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"services.controls.description.label")),e.xp6(3),e.Q6J("icon",t.faCircleInfo)("matTooltip",e.lcZ(6,5,"services.controls.description.tooltip"))}}function Oe(n,i){1&n&&(e.TgZ(0,"mat-slide-toggle",17),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"active")))}function Le(n,i){if(1&n&&(e.ynx(0),e._UZ(1,"df-script-editor",25),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("type",t.getControl("type"))("storageServiceId",t.getConfigControl("storageServiceId"))("storagePath",t.getConfigControl("storagePath"))("content",t.getConfigControl("content"))("cache",t.serviceData?t.serviceData.name:"")}}function Ye(n,i){if(1&n&&e._UZ(0,"df-dynamic-field",28),2&n){const t=e.oxw(2).$implicit,o=e.oxw(2);e.ekj("dynamic-width","file_certificate"!==t.type)("full-width","file_certificate"===t.type),e.Q6J("schema",t)("formControl",o.getConfigControl(t.name))}}function Ue(n,i){if(1&n&&e._UZ(0,"df-array-field",29),2&n){const t=e.oxw(2).$implicit,o=e.oxw(2);e.Q6J("schema",t)("formControl",o.getConfigControl(t.name))}}a(6625);const Me=function(){return["integer","password","string","text","picklist","multi_picklist","boolean","file_certificate"]};function ke(n,i){if(1&n&&(e.YNc(0,Ye,1,6,"df-dynamic-field",26),e.YNc(1,Ue,1,2,"df-array-field",27)),2&n){const t=e.oxw().$implicit;e.Q6J("ngIf",e.DdM(2,Me).includes(t.type)),e.xp6(1),e.Q6J("ngIf","array"===t.type||"object"===t.type)}}function Pe(n,i){if(1&n&&(e.ynx(0),e.YNc(1,Le,2,5,"ng-container",23),e.YNc(2,ke,2,3,"ng-template",null,24,e.W1O),e.BQk()),2&n){const t=i.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf","text"===t.type&&"content"===t.name)("ngIfElse",o)}}function Re(n,i){if(1&n&&(e.ynx(0)(1,18),e.TgZ(2,"mat-accordion",19)(3,"mat-expansion-panel",20)(4,"mat-expansion-panel-header"),e._uU(5),e.ALo(6,"transloco"),e.qZA(),e.TgZ(7,"div",21),e.YNc(8,Pe,4,2,"ng-container",22),e.qZA()()(),e.BQk()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("expanded",!t.serviceForm.getRawValue().type||"soap"===t.serviceForm.getRawValue().type||"rws"===t.serviceForm.getRawValue().type),e.xp6(2),e.hij("",e.lcZ(6,3,"services.options")," "),e.xp6(3),e.Q6J("ngForOf",t.viewSchema)}}function Be(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",30)(1,"button",31),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.goBack())}),e._uU(2),e.ALo(3,"transloco"),e.qZA(),e.TgZ(4,"button",32),e._uU(5),e.ALo(6,"transloco"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(6,4,"save")," "))}function Ee(n,i){1&n&&e._UZ(0,"df-paywall")}let Y=((y=class{constructor(i,t,o,r,m){this.activatedRoute=i,this.fb=t,this.servicesService=o,this.router=r,this.systemConfigDataService=m,this.edit=!1,this.faCircleInfo=b.DBf,this.serviceForm=this.fb.group({type:["",c.kI.required],name:["",c.kI.required],label:[""],description:[""],isActive:[!0]}),this.activatedRoute.snapshot.paramMap.get("id")&&(this.edit=!0)}ngOnInit(){this.systemConfigDataService.environment$.pipe((0,Te.w)(i=>this.activatedRoute.data.pipe((0,A.U)(t=>({env:i,route:t}))))).subscribe(({env:i,route:t})=>{const{data:o,serviceTypes:r,groups:m}=t,D=i.platform?.license;this.serviceTypes=r,"SILVER"===D&&this.serviceTypes.push(...k.filter(d=>m.includes(d.group))),"OPEN SOURCE"===D&&this.serviceTypes.push(...Ie.filter(d=>m.includes(d.group)),...k.filter(d=>m.includes(d.group))),this.serviceData=o,this.edit?(this.configSchema=this.getConfigSchema(o.type),this.initializeConfig(),this.serviceForm.patchValue({...o,config:o.config}),this.serviceForm.controls.type.disable()):this.serviceForm.controls.type.valueChanges.subscribe(d=>{this.serviceForm.removeControl("config"),this.configSchema=this.getConfigSchema(d),this.initializeConfig()})})}initializeConfig(){if(this.configSchema&&this.configSchema.length>0){const i=this.fb.group({});this.configSchema.forEach(t=>{const o=[];t.required&&o.push(c.kI.required),i.addControl(t.name,new c.NI(t.default,o))}),this.serviceForm.addControl("config",i)}}get subscriptionRequired(){return this.serviceForm.controls.type.value&&0===this.configSchema.length}get scriptMode(){const i=this.serviceForm.getRawValue().type;return"nodejs"===i?I.h.NODEJS:"python"===i||"python3"===i?I.h.PYTHON:"php"===i?I.h.PHP:I.h.TEXT}getConfigSchema(i){return this.serviceTypes.find(t=>t.name===i)?.configSchema.map(t=>({...t,name:(0,Ce.LZ)(t.name)}))??[]}get viewSchema(){return this.configSchema?.filter(i=>!["storageServiceId","storagePath"].includes(i.name))}getConfigControl(i){return this.serviceForm.get(`config.${i}`)}getControl(i){return this.serviceForm.controls[i]}save(){if(this.serviceForm.invalid)return;const i=this.serviceForm.getRawValue();this.edit?this.servicesService.update(this.serviceData.id,i,{snackbarError:"server",snackbarSuccess:"services.updateSuccessMsg"}).subscribe(()=>{this.router.navigate(["../"],{relativeTo:this.activatedRoute})}):this.servicesService.create({resource:[i]},{snackbarError:"server",snackbarSuccess:"services.createSuccessMsg"}).subscribe(()=>{this.router.navigate([`/api-connections/api-docs/${i.name}`])})}goBack(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}).\u0275fac=function(i){return new(i||y)(e.Y36(N.gz),e.Y36(c.qu),e.Y36(Se.xS),e.Y36(N.F0),e.Y36(we.s))},y.\u0275cmp=e.Xpm({type:y,selectors:[["df-service-details"]],standalone:!0,features:[e.jDz],decls:16,vars:16,consts:[[1,"details-section",3,"formGroup","ngSubmit"],["subscriptSizing","dynamic",1,"fourth-width"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"tool-tip-trigger",3,"icon","matTooltip"],["subscriptSizing","dynamic","class","fourth-width",4,"ngIf"],["subscriptSizing","dynamic","class","dynamic-width",4,"ngIf"],["subscriptSizing","dynamic","class","full-width",4,"ngIf"],["formControlName","isActive",4,"ngIf"],[4,"ngIf"],["class","full-width action-bar",4,"ngIf"],[3,"value"],["matInput","","formControlName","name"],["subscriptSizing","dynamic",1,"dynamic-width"],["matInput","","formControlName","label"],["subscriptSizing","dynamic",1,"full-width"],["rows","1","matInput","","formControlName","description"],["formControlName","isActive"],["formGroupName","config"],[1,"full-width"],[3,"expanded"],[1,"details-section"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["dynamic",""],[1,"full-width",3,"type","storageServiceId","storagePath","content","cache"],[3,"schema","formControl","dynamic-width","full-width",4,"ngIf"],["class","full-width",3,"schema","formControl",4,"ngIf"],[3,"schema","formControl"],[1,"full-width",3,"schema","formControl"],[1,"full-width","action-bar"],["mat-flat-button","","type","button",3,"click"],["mat-flat-button","","color","primary"]],template:function(i,t){1&i&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.save()}),e.TgZ(1,"mat-form-field",1)(2,"mat-label"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"mat-select",2),e.YNc(6,Fe,2,2,"mat-option",3),e.qZA(),e._UZ(7,"fa-icon",4),e.ALo(8,"transloco"),e.qZA(),e.YNc(9,Qe,7,7,"mat-form-field",5),e.YNc(10,Ne,7,7,"mat-form-field",6),e.YNc(11,Je,7,7,"mat-form-field",7),e.YNc(12,Oe,3,3,"mat-slide-toggle",8),e.YNc(13,Re,9,5,"ng-container",9),e.YNc(14,Be,7,6,"div",10),e.qZA(),e.YNc(15,Ee,1,0,"df-paywall",9)),2&i&&(e.Q6J("formGroup",t.serviceForm),e.xp6(3),e.Oqu(e.lcZ(4,12,"services.controls.serviceType.label")),e.xp6(3),e.Q6J("ngForOf",t.serviceTypes),e.xp6(1),e.Q6J("icon",t.faCircleInfo)("matTooltip",e.lcZ(8,14,"services.controls.serviceType.tooltip")),e.xp6(2),e.Q6J("ngIf",!t.subscriptionRequired),e.xp6(1),e.Q6J("ngIf",!t.subscriptionRequired),e.xp6(1),e.Q6J("ngIf",!t.subscriptionRequired),e.xp6(1),e.Q6J("ngIf",!t.subscriptionRequired),e.xp6(1),e.Q6J("ngIf",t.viewSchema&&!t.subscriptionRequired),e.xp6(1),e.Q6J("ngIf",!t.subscriptionRequired),e.xp6(1),e.Q6J("ngIf",t.subscriptionRequired))},dependencies:[l.lN,l.KE,l.hX,l.R9,u.c,u.Nt,x.LD,x.gD,M.ey,f.ax,S.rP,S.Rr,R.Nh,C.To,C.pp,C.ib,C.yz,w.Ot,c.UX,c._Y,c.Fj,c.JJ,c.JL,c.oH,c.sg,c.u,c.x0,c.u5,f.O5,P.p9,T,L,h.uH,h.BN,_.AV,_.gM,g.ot,g.lW,Ae.E,Ze.U]}),y);Y=(0,Z.gn)([(0,F.c)({checkProperties:!0})],Y)}}]);
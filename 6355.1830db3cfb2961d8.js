"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[6355],{16355:(j,w,c)=>{c.r(w),c.d(w,{DfRoleDetailsComponent:()=>G});var D,i=c(97582),r=c(56223),g=c(96814),C=c(42346),v=c(86806),d=c(64170),b=c(84870),T=c(2032),y=c(82599),_=c(32296),Z=c(15861),u=c(25313),O=c(90590),t=c(98525),A=c(3305),k=c(45597),P=c(78791),e=c(65879),E=c(81896),L=c(23680);function M(s,o){1&s&&(e.TgZ(0,"th",15),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"roles.accessOverview.tableHeadings.service")," "))}function K(s,o){if(1&s&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&s){const n=o.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.name," ")}}function J(s,o){if(1&s){const n=e.EpF();e.TgZ(0,"td",16)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"mat-select",18),e.NdJ("selectionChange",function(){const h=e.CHM(n).index,x=e.oxw();return e.KtG(x.getComponents(h))}),e.TgZ(6,"mat-option",19),e._uU(7,"All"),e.qZA(),e.YNc(8,K,2,2,"mat-option",20),e.qZA()()()}if(2&s){const n=o.index,a=e.oxw();e.Q6J("formGroupName",n),e.xp6(3),e.Oqu(e.lcZ(4,4,"roles.accessOverview.tableHeadings.service")),e.xp6(3),e.Q6J("value",0),e.xp6(2),e.Q6J("ngForOf",a.serviceOptions)}}function Q(s,o){1&s&&(e.TgZ(0,"th",15),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"roles.accessOverview.tableHeadings.component")," "))}function q(s,o){if(1&s&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&s){const n=o.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n," ")}}function F(s,o){if(1&s&&(e.TgZ(0,"td",16)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"mat-select",21),e.YNc(6,q,2,2,"mat-option",20),e.qZA()()()),2&s){const n=o.index,a=e.oxw();e.Q6J("formGroupName",n),e.xp6(3),e.Oqu(e.lcZ(4,3,"roles.accessOverview.tableHeadings.component")),e.xp6(3),e.Q6J("ngForOf",a.getComponentArray(n))}}function I(s,o){1&s&&(e.TgZ(0,"th",15),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"roles.accessOverview.tableHeadings.access")," "))}function l(s,o){if(1&s&&(e.TgZ(0,"span",24),e._uU(1),e.qZA()),2&s){const n=e.oxw(2).index,a=e.oxw();e.xp6(1),e.AsE(" (+",(a.serviceAccess.controls[n].value.access.length||0)-1," ",2===a.serviceAccess.controls[n].value.access.length?"other":"others",") ")}}function p(s,o){if(1&s&&(e.TgZ(0,"mat-option",19),e._uU(1),e.YNc(2,l,2,2,"span",23),e.qZA()),2&s){const n=o.$implicit,a=e.oxw().index,m=e.oxw();e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.label," "),e.xp6(1),e.Q6J("ngIf",(m.serviceAccess.controls[a].value.access.length||0)>1)}}function f(s,o){if(1&s){const n=e.EpF();e.TgZ(0,"td",16)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"mat-select",22),e.NdJ("selectionChange",function(m){const x=e.CHM(n).index,re=e.oxw();return e.KtG(re.accessChange(x,m.value))}),e.YNc(6,p,3,3,"mat-option",20),e.qZA()()()}if(2&s){const n=o.index,a=e.oxw();e.Q6J("formGroupName",n),e.xp6(3),e.hij("",e.lcZ(4,3,"roles.accessOverview.tableHeadings.access")," "),e.xp6(3),e.Q6J("ngForOf",a.accessOptions)}}function N(s,o){1&s&&(e.TgZ(0,"th",15),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"roles.accessOverview.tableHeadings.requester")," "))}function U(s,o){if(1&s&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&s){const n=o.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.label," ")}}function B(s,o){if(1&s&&(e.TgZ(0,"td",16)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"mat-select",25),e.YNc(6,U,2,2,"mat-option",20),e.qZA()()()),2&s){const n=o.index,a=e.oxw();e.Q6J("formGroupName",n),e.xp6(3),e.Oqu(e.lcZ(4,3,"roles.accessOverview.tableHeadings.requester")),e.xp6(3),e.Q6J("ngForOf",a.requesterOptions)}}function Y(s,o){1&s&&(e.TgZ(0,"th",15),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"roles.accessOverview.tableHeadings.advancedFilters")," "))}function X(s,o){1&s&&(e.TgZ(0,"td",16),e._uU(1," N/A "),e.qZA()),2&s&&e.Q6J("formGroupName",o.index)}function V(s,o){if(1&s){const n=e.EpF();e.TgZ(0,"th",15)(1,"button",26),e.NdJ("click",function(){e.CHM(n);const m=e.oxw();return e.KtG(m.add())}),e.ALo(2,"transloco"),e._UZ(3,"fa-icon",27),e.qZA()()}if(2&s){const n=e.oxw();e.xp6(1),e.uIk("aria-label",e.lcZ(2,2,"newEntry")),e.xp6(2),e.Q6J("icon",n.faPlus)}}function $(s,o){if(1&s){const n=e.EpF();e.TgZ(0,"td",16)(1,"button",28),e.NdJ("click",function(){const h=e.CHM(n).index,x=e.oxw();return e.KtG(x.remove(h))}),e._UZ(2,"fa-icon",29),e.qZA()()}if(2&s){const n=o.index,a=e.oxw();e.Q6J("formGroupName",n),e.xp6(2),e.Q6J("icon",a.faTrashCan)}}function ee(s,o){1&s&&e._UZ(0,"tr",30)}function te(s,o){1&s&&e._UZ(0,"tr",31)}function oe(s,o){1&s&&(e.TgZ(0,"tr",32)(1,"td",33),e._UZ(2,"br"),e._uU(3),e.ALo(4,"transloco"),e.qZA()()),2&s&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"roles.accessOverview.noAccessRules")," "))}c(6625);let S=((D=class{constructor(o,n,a){this.rootFormGroup=o,this.activatedRoute=n,this.baseService=a,this.displayedColumns=["service","component","access","requester","advancedFilters","actions"],this.faTrashCan=O.Vui,this.faPlus=O.r8p,this.serviceOptions=[{id:0,name:""}],this.componentOptions=[{serviceId:0,components:["*"]}],this.accessOptions=[{value:1,label:"GET (read)"},{value:2,label:"POST (create)"},{value:4,label:"PUT (replace)"},{value:8,label:"PATCH (update)"},{value:16,label:"DELETE (remove)"}],this.requesterOptions=[{value:1,label:"API"},{value:2,label:"SCRIPT"}]}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.rootForm.markAllAsTouched()}),this.serviceAccess=this.rootForm.get("serviceAccess"),this.activatedRoute.data.subscribe(o=>{this.serviceOptions=o?.services?.resource.sort((n,a)=>n.name<a.name?-1:n.name>a.name?1:0)||[],"edit"===o.type&&o.data.roleServiceAccessByRoleId.length>0&&o.data.roleServiceAccessByRoleId.forEach(n=>{const a=n.serviceId,m=this.serviceOptions.find(h=>h.id===a)?.name||"";"email"!==m?this.baseService.get(m,{additionalParams:[{key:"as_access_list",value:!0}]}).subscribe(h=>{this.componentOptions.push({serviceId:a,components:h.resource})}):this.componentOptions.push({serviceId:a,components:["*"]})})}),this.updateDataSource()}getComponents(o){var n=this;return(0,Z.Z)(function*(){const a=n.serviceAccess.at(o).get("service")?.value,m=n.serviceOptions.find(h=>h.id===a)?.name||"";"email"!==m?n.componentOptions.some(h=>h.serviceId===a)||n.baseService.get(m,{additionalParams:[{key:"as_access_list",value:!0}]}).subscribe(h=>{n.componentOptions.push({serviceId:a,components:h.resource})}):n.componentOptions.push({serviceId:a,components:["*"]})})()}getComponentArray(o){const n=this.serviceAccess.at(o).get("service")?.value;return this.componentOptions.find(m=>m.serviceId===n)?.components||[]}accessChange(o,n){this.serviceAccess.at(o).get("access")}updateDataSource(){this.serviceAccess&&(this.dataSource=new u.by(this.serviceAccess.controls))}get hasServiceAccess(){return this.rootForm.controls.serviceAccess.value.length>0}add(){this.serviceAccess.push(new r.cw({service:new r.NI(0,r.kI.required),component:new r.NI("",r.kI.required),access:new r.NI("",r.kI.required),requester:new r.NI([1],r.kI.required),advancedFilters:new r.NI([]),id:new r.NI(null)})),this.updateDataSource()}remove(o){this.serviceAccess.removeAt(o),this.updateDataSource()}}).\u0275fac=function(o){return new(o||D)(e.Y36(r.sg),e.Y36(E.gz),e.Y36(v.PA))},D.\u0275cmp=e.Xpm({type:D,selectors:[["df-roles-access"]],standalone:!0,features:[e.jDz],decls:37,vars:13,consts:[[1,"service-access-accordion"],[3,"formGroup"],["formArrayName","serviceAccess"],["mat-table","",3,"dataSource"],["matColumnDef","service"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"formGroupName",4,"matCellDef"],["matColumnDef","component"],["matColumnDef","access"],["matColumnDef","requester"],["matColumnDef","advancedFilters"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell","",3,"formGroupName"],["subscriptSizing","dynamic"],["formControlName","service","panelWidth","null",3,"selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","component","panelWdith","null"],["formControlName","access","multiple","","panelWidth","null",3,"selectionChange"],["class","example-additional-selection",4,"ngIf"],[1,"example-additional-selection"],["formControlName","requester","multiple","","panelWidth","null"],["mat-mini-fab","","color","primary","type","button",3,"click"],["size","xl",3,"icon"],["mat-icon-button","",3,"click"],["size","xs",3,"icon"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),e._uU(5),e.ALo(6,"transloco"),e.qZA(),e.TgZ(7,"mat-panel-description"),e._uU(8),e.ALo(9,"transloco"),e.qZA()(),e.TgZ(10,"p"),e._uU(11),e.ALo(12,"transloco"),e.qZA(),e.ynx(13,1)(14,2),e.TgZ(15,"table",3),e.ynx(16,4),e.YNc(17,M,3,3,"th",5),e.YNc(18,J,9,6,"td",6),e.BQk(),e.ynx(19,7),e.YNc(20,Q,3,3,"th",5),e.YNc(21,F,7,5,"td",6),e.BQk(),e.ynx(22,8),e.YNc(23,I,3,3,"th",5),e.YNc(24,f,7,5,"td",6),e.BQk(),e.ynx(25,9),e.YNc(26,N,3,3,"th",5),e.YNc(27,B,7,5,"td",6),e.BQk(),e.ynx(28,10),e.YNc(29,Y,3,3,"th",5),e.YNc(30,X,2,1,"td",6),e.BQk(),e.ynx(31,11),e.YNc(32,V,4,4,"th",5),e.YNc(33,$,3,2,"td",6),e.BQk(),e.YNc(34,ee,1,0,"tr",12),e.YNc(35,te,1,0,"tr",13),e.YNc(36,oe,5,3,"tr",14),e.qZA(),e.BQk()(),e.qZA()()()),2&o&&(e.xp6(5),e.hij(" ",e.lcZ(6,7,"roles.accessOverview.heading"),""),e.xp6(3),e.Oqu(e.lcZ(9,9,"roles.accessOverview.tableDescription")),e.xp6(3),e.hij(" ",e.lcZ(12,11,"roles.accessOverview.description")," "),e.xp6(2),e.Q6J("formGroup",n.rootForm),e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[C.Ot,u.p0,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,u.Ee,r.UX,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE,d.lN,d.KE,d.hX,t.LD,t.gD,L.ey,A.To,A.pp,A.ib,A.yz,A.yK,A.u4,k.uH,k.BN,_.ot,_.RK,_.nh,g.ax,g.O5],styles:["mat-expansion-panel[_ngcontent-%COMP%]{overflow-x:auto!important}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}"]}),D);S=(0,i.gn)([(0,P.c)({checkProperties:!0})],S);var R,ne=c(41089),W=c(26306),z=c(58504);function se(s,o){1&s&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"roles.rolesOverview.error.name")," "))}function ae(s,o){1&s&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"save")," "))}function ce(s,o){1&s&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"update")," "))}let G=((R=class{constructor(o,n,a,m){this.roleService=o,this.fb=n,this.router=a,this.activatedRoute=m,this.type="",this.alertMsg="",this.showAlert=!1,this.alertType="error",this.roleForm=this.fb.group({id:[null],name:["",r.kI.required],description:[""],active:[!1],serviceAccess:this.fb.array([]),lookupKeys:this.fb.array([])})}ngOnInit(){this.activatedRoute.data.subscribe(({data:o,type:n})=>{this.type=n,o&&(this.roleForm.patchValue({id:o.id,name:o.name,description:o.description,active:o.isActive}),o.roleServiceAccessByRoleId.length>0&&o.roleServiceAccessByRoleId.forEach(a=>{this.roleForm.controls.serviceAccess.push(new r.cw({service:new r.NI(a.serviceId,[r.kI.required]),component:new r.NI(a.component),access:new r.NI(this.handleAccessValue(a.verbMask)),requester:new r.NI(this.handleRequesterValue(a.requestorMask)),advancedFilters:new r.NI(a.filters),id:new r.NI(a.id)}))}),o.lookupByRoleId.length>0&&o.lookupByRoleId.forEach(a=>{this.roleForm.controls.lookupKeys.push(new r.cw({name:new r.NI(a.name,[r.kI.required]),value:new r.NI(a.value),private:new r.NI(a.private)}))}))})}handleRequesterValue(o){return 3===o?[1,2]:[o]}handleAccessValue(o){const n=[1,2,4,8,16],a=[];for(let m=n.length-1;m>=0;m--){const h=n[m];o>=h&&(a.push(h),o-=h)}return a}triggerAlert(o,n){this.alertType=o,this.alertMsg=n,this.showAlert=!0}onSubmit(){if(this.roleForm.invalid)return;const o=this.roleForm.getRawValue(),n={id:o.id,name:o.name,description:o.description,isActive:o.active,roleServiceAccessByRoleId:o.serviceAccess.map(m=>({id:m.id,serviceId:m.service,component:m.component,verbMask:m.access.reduce((h,x)=>h+x,0),requestorMask:m.requester.reduce((h,x)=>h+x,0),filters:m.advancedFilters,filterOp:"AND"})),lookupByRoleId:o.lookupKeys},a={resource:[n]};"edit"===this.type&&n.id?this.roleService.update(n.id,n).pipe((0,W.K)(m=>(this.triggerAlert("error",m.error.error.message),(0,z._)(()=>new Error(m))))).subscribe(()=>{this.goBack()}):this.roleService.create(a,{fields:"*",related:"role_service_access_by_role_id,lookup_by_role_id"}).pipe((0,W.K)(m=>(this.triggerAlert("error",m.error.error.context.resource[0].message),(0,z._)(()=>new Error(m))))).subscribe(()=>{this.goBack()})}goBack(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}).\u0275fac=function(o){return new(o||R)(e.Y36(v.i9),e.Y36(r.qu),e.Y36(E.F0),e.Y36(E.gz))},R.\u0275cmp=e.Xpm({type:R,selectors:[["df-role-details"]],standalone:!0,features:[e.jDz],decls:32,vars:25,consts:[[3,"showAlert","alertType","alertClosed"],[1,"details-section",3,"formGroup","ngSubmit"],["subscriptSizing","dynamic",1,"dynamic-width"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["formControlName","active",1,"dynamic-width"],["subscriptSizing","dynamic"],["rows","1","matInput","","formControlName","description"],["formArrayName","serviceAccess",1,"full-width"],["formArrayName","lookupKeys",1,"full-width"],[1,"full-width","action-bar"],["mat-flat-button","","type","button",3,"click"],["mat-flat-button","","color","primary"]],template:function(o,n){1&o&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"transloco"),e.qZA(),e.TgZ(3,"df-alert",0),e.NdJ("alertClosed",function(){return n.showAlert=!1}),e._uU(4),e.qZA(),e.TgZ(5,"form",1),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(6,"mat-form-field",2)(7,"mat-label"),e._uU(8),e.ALo(9,"transloco"),e.qZA(),e._UZ(10,"input",3),e.YNc(11,se,3,3,"mat-error",4),e.qZA(),e.TgZ(12,"mat-slide-toggle",5),e._uU(13),e.ALo(14,"transloco"),e.qZA(),e.TgZ(15,"mat-form-field",6)(16,"mat-label"),e._uU(17),e.ALo(18,"transloco"),e.qZA(),e._UZ(19,"textarea",7),e.qZA(),e._UZ(20,"df-roles-access",8),e.TgZ(21,"p"),e._uU(22),e.ALo(23,"transloco"),e.qZA(),e._UZ(24,"df-lookup-keys",9),e.TgZ(25,"div",10)(26,"button",11),e.NdJ("click",function(){return n.goBack()}),e._uU(27),e.ALo(28,"transloco"),e.qZA(),e.TgZ(29,"button",12),e.YNc(30,ae,3,3,"span",4),e.YNc(31,ce,3,3,"span",4),e.qZA()()()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,13,"roles.rolesOverview.description"),"\n"),e.xp6(2),e.Q6J("showAlert",n.showAlert)("alertType",n.alertType),e.xp6(1),e.hij(" ",n.alertMsg,"\n"),e.xp6(1),e.Q6J("formGroup",n.roleForm),e.xp6(3),e.Oqu(e.lcZ(9,15,"name")),e.xp6(3),e.Q6J("ngIf",n.roleForm.controls.name.hasError("required")),e.xp6(2),e.Oqu(e.lcZ(14,17,"active")),e.xp6(4),e.Oqu(e.lcZ(18,19,"description")),e.xp6(5),e.hij(" ",e.lcZ(23,21,"roles.lookupKeys.description")," "),e.xp6(5),e.hij(" ",e.lcZ(28,23,"cancel")," "),e.xp6(3),e.Q6J("ngIf","create"===n.type),e.xp6(1),e.Q6J("ngIf","edit"===n.type))},dependencies:[C.Ot,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,T.c,T.Nt,d.KE,d.hX,d.TO,d.lN,r.UX,r.sg,r.u,r.CE,b.a,y.rP,y.Rr,_.ot,_.lW,S,g.O5,ne.v],encapsulation:2}),R);G=(0,i.gn)([(0,P.c)({checkProperties:!0})],G)},41089:(j,w,c)=>{c.d(w,{v:()=>y});var i=c(65879),r=c(96814),g=c(32296),C=c(45597),v=c(90590);function d(_,Z){if(1&_){const u=i.EpF();i.TgZ(0,"button",5),i.NdJ("click",function(){i.CHM(u);const t=i.oxw(2);return i.KtG(t.dismissAlert())}),i.TgZ(1,"fa-icon",6),i._uU(2),i.qZA()()}if(2&_){const u=i.oxw(2);i.xp6(1),i.Q6J("icon",u.faXmark),i.xp6(1),i.Oqu("alerts.close")}}function b(_,Z){if(1&_&&(i.TgZ(0,"div",1),i._UZ(1,"fa-icon",2),i.TgZ(2,"span",3),i.Hsn(3),i.qZA(),i.YNc(4,d,3,2,"button",4),i.qZA()),2&_){const u=i.oxw();i.Tol(u.alertType),i.xp6(1),i.Q6J("icon",u.icon),i.xp6(3),i.Q6J("ngIf",u.dismissible)}}const T=["*"];let y=(()=>{class _{constructor(){this.alertType="success",this.showAlert=!1,this.dismissible=!0,this.alertClosed=new i.vpe,this.faXmark=v.g82}dismissAlert(){this.alertClosed.emit()}get icon(){switch(this.alertType){case"success":return v.f8k;case"error":return v.$9F;case"warning":return v.RLE;default:return v.sqG}}}return _.\u0275fac=function(u){return new(u||_)},_.\u0275cmp=i.Xpm({type:_,selectors:[["df-alert"]],inputs:{alertType:"alertType",showAlert:"showAlert",dismissible:"dismissible"},outputs:{alertClosed:"alertClosed"},standalone:!0,features:[i.jDz],ngContentSelectors:T,decls:1,vars:1,consts:[["class","alert-container",3,"class",4,"ngIf"],[1,"alert-container"],["aria-hidden","true",1,"alert-icon",3,"icon"],["role","alert",1,"alert-message"],["mat-icon-button","","class","dismiss-alert",3,"click",4,"ngIf"],["mat-icon-button","",1,"dismiss-alert",3,"click"],[3,"icon"]],template:function(u,O){1&u&&(i.F$t(),i.YNc(0,b,5,4,"div",0)),2&u&&i.Q6J("ngIf",O.showAlert)},dependencies:[r.O5,g.ot,g.RK,C.uH,C.BN],styles:[".alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border:1px solid;border-radius:5px;box-shadow:0 0 5px #0003;color:#000}.alert-container[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{flex:1;padding:8px}.alert-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{padding:0 10px}.alert-container.success[_ngcontent-%COMP%]{border-color:#81c784;background-color:#c8e6c9}.alert-container.success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#4caf50}.alert-container.error[_ngcontent-%COMP%]{border-color:#e57373;background-color:#ffcdd2}.alert-container.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f44336}.alert-container.warning[_ngcontent-%COMP%]{border-color:#ffb74d;background-color:#ffe0b2}.alert-container.warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ff9800}.alert-container.info[_ngcontent-%COMP%]{border-color:#64b5f6;background-color:#bbdefb}.alert-container.info[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#2196f3}"]}),_})()},84870:(j,w,c)=>{c.d(w,{a:()=>I});var A,i=c(97582),r=c(96814),g=c(56223),C=c(64170),v=c(32296),d=c(25313),b=c(2032),T=c(82599),y=c(45597),_=c(3305),Z=c(90590),u=c(42346),O=c(78791),t=c(65879);function k(l,p){if(1&l&&(t.TgZ(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._uU(4),t.ALo(5,"transloco"),t.qZA(),t.TgZ(6,"mat-panel-description"),t._uU(7),t.ALo(8,"transloco"),t.qZA()(),t.GkF(9,3),t.qZA()()),2&l){t.oxw();const f=t.MAs(3);t.xp6(4),t.hij(" ",t.lcZ(5,3,"lookupKeys.label"),""),t.xp6(3),t.Oqu(t.lcZ(8,5,"lookupKeys.desc")),t.xp6(2),t.Q6J("ngTemplateOutlet",f)}}function P(l,p){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"name")," "))}function e(l,p){1&l&&(t.TgZ(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"input",18),t.qZA()()),2&l&&(t.Q6J("formGroupName",p.index),t.xp6(3),t.Oqu(t.lcZ(4,2,"name")))}function E(l,p){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"value")," "))}function L(l,p){1&l&&(t.TgZ(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"input",19),t.qZA()()),2&l&&(t.Q6J("formGroupName",p.index),t.xp6(3),t.Oqu(t.lcZ(4,2,"value")))}function H(l,p){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"private")," "))}function D(l,p){1&l&&(t.TgZ(0,"mat-cell",16),t._UZ(1,"mat-slide-toggle",20),t.ALo(2,"transloco"),t.qZA()),2&l&&(t.Q6J("formGroupName",p.index),t.xp6(1),t.uIk("aria-label",t.lcZ(2,2,"name")))}function M(l,p){if(1&l){const f=t.EpF();t.TgZ(0,"mat-header-cell")(1,"button",21),t.NdJ("click",function(){t.CHM(f);const U=t.oxw(2);return t.KtG(U.add())}),t.ALo(2,"transloco"),t._UZ(3,"fa-icon",22),t.qZA()()}if(2&l){const f=t.oxw(2);t.xp6(1),t.uIk("aria-label",t.lcZ(2,2,"newEntry")),t.xp6(2),t.Q6J("icon",f.faPlus)}}function K(l,p){if(1&l){const f=t.EpF();t.TgZ(0,"mat-cell",16)(1,"button",23),t.NdJ("click",function(){const B=t.CHM(f).index,Y=t.oxw(2);return t.KtG(Y.remove(B))}),t._UZ(2,"fa-icon",24),t.qZA()()}if(2&l){const f=p.index,N=t.oxw(2);t.Q6J("formGroupName",f),t.xp6(2),t.Q6J("icon",N.faTrashCan)}}function J(l,p){1&l&&t._UZ(0,"mat-header-row")}function Q(l,p){1&l&&t._UZ(0,"mat-row")}function q(l,p){1&l&&(t.TgZ(0,"tr",25)(1,"td",26),t._uU(2),t.ALo(3,"transloco"),t.qZA()()),2&l&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lookupKeys.noKeys")," "))}function F(l,p){if(1&l&&(t.ynx(0,4)(1,5),t.TgZ(2,"mat-table",6),t.ynx(3,7),t.YNc(4,P,3,3,"mat-header-cell",8),t.YNc(5,e,6,4,"mat-cell",9),t.BQk(),t.ynx(6,10),t.YNc(7,E,3,3,"mat-header-cell",8),t.YNc(8,L,6,4,"mat-cell",9),t.BQk(),t.ynx(9,11),t.YNc(10,H,3,3,"mat-header-cell",8),t.YNc(11,D,3,4,"mat-cell",9),t.BQk(),t.ynx(12,12),t.YNc(13,M,4,4,"mat-header-cell",8),t.YNc(14,K,3,2,"mat-cell",9),t.BQk(),t.YNc(15,J,1,0,"mat-header-row",13),t.YNc(16,Q,1,0,"mat-row",14),t.YNc(17,q,4,3,"tr",15),t.qZA(),t.BQk()()),2&l){const f=t.oxw();t.Q6J("formGroup",f.rootForm),t.xp6(2),t.Q6J("dataSource",f.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",f.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",f.displayedColumns)}}let I=((A=class{constructor(p){this.rootFormGroup=p,this.displayedColumns=["name","value","private","actions"],this.faTrashCan=Z.Vui,this.faPlus=Z.r8p,this.showAccordion=!0}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.lookupKeys.markAllAsTouched()}),this.lookupKeys=this.rootForm.get("lookupKeys"),this.updateDataSource()}updateDataSource(){this.lookupKeys.controls.forEach(p=>{p.get("id")?.value&&p.get("name")?.disable()}),this.dataSource=new d.by(this.lookupKeys.controls)}add(){this.lookupKeys.push(new g.cw({name:new g.NI("",g.kI.required),value:new g.NI(""),private:new g.NI(!1)})),this.updateDataSource()}remove(p){this.lookupKeys.removeAt(p),this.updateDataSource()}}).\u0275fac=function(p){return new(p||A)(t.Y36(g.sg))},A.\u0275cmp=t.Xpm({type:A,selectors:[["df-lookup-keys"]],inputs:{showAccordion:"showAccordion"},standalone:!0,features:[t.jDz],decls:4,vars:2,consts:[[1,"lookup-keys-accordion"],[4,"ngIf","ngIfElse"],["lookupKeys",""],[3,"ngTemplateOutlet"],[3,"formGroup"],["formArrayName","lookupKeys"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","private"],["matColumnDef","actions","stickyEnd",""],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row no-data-row",4,"matNoDataRow"],[3,"formGroupName"],["subscriptSizing","dynamic"],["matInput","","formControlName","name"],["matInput","","formControlName","value"],["formControlName","private"],["mat-mini-fab","","color","primary","type","button",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",3,"click"],["size","xs",3,"icon"],[1,"mat-row","no-data-row"],["colspan","4",1,"mat-cell"]],template:function(p,f){if(1&p&&(t.TgZ(0,"div",0),t.YNc(1,k,10,7,"mat-accordion",1),t.YNc(2,F,18,4,"ng-template",null,2,t.W1O),t.qZA()),2&p){const N=t.MAs(3);t.xp6(1),t.Q6J("ngIf",f.showAccordion)("ngIfElse",N)}},dependencies:[g.u5,g.Fj,g.JJ,g.JL,g.UX,g.sg,g.u,g.x0,g.CE,r.O5,r.tP,C.lN,C.KE,C.hX,v.ot,v.RK,v.nh,d.p0,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,d.Ee,b.c,b.Nt,T.rP,T.Rr,y.uH,y.BN,_.To,_.pp,_.ib,_.yz,_.yK,_.u4,u.Ot],styles:[".lookup-keys-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%], .mat-column-private[_ngcontent-%COMP%]{max-width:10%}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}"]}),A);I=(0,i.gn)([(0,O.c)({checkProperties:!0})],I)}}]);
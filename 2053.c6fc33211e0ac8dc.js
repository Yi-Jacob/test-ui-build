"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[2053],{22053:(U,f,i)=>{i.r(f),i.d(f,{DfScriptDetailsComponent:()=>u});var y=i(97582),C=i(78791),h=i(82599),l=i(42346),c=i(64170),d=i(98525),v=i(96814),p=i(24546);const T=[{label:(0,l.Iu)("scriptTypes.nodejs"),value:p.h.NODEJS,extension:"js"},{label:(0,l.Iu)("scriptTypes.php"),value:p.h.PHP,extension:"php"},{label:(0,l.Iu)("scriptTypes.python"),value:p.h.PYTHON,extension:"py"}];var r,s=i(56223),g=i(32296),A=i(55799),m=i(24630),Z=i(2032),F=i(27921),O=i(37398),b=i(15711),J=i(86806),t=i(65879),D=i(81896),S=i(23680);function N(n,e){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function I(n,e){if(1&n&&(t.TgZ(0,"mat-optgroup",12),t.YNc(1,N,2,2,"mat-option",6),t.qZA()),2&n){const o=e.$implicit;t.Q6J("label",o.name),t.xp6(1),t.Q6J("ngForOf",o.endpoints)}}function L(n,e){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij(" ",o.label," ")}}i(6625);let u=((r=class{constructor(e,o,a,P){this.activatedRoute=e,this.fb=o,this.router=a,this.eventScriptService=P,this.types=T,this.type="create",this.loaded=!1,this.scriptForm=this.fb.group({name:["",[s.kI.required]],type:["nodejs",[s.kI.required]],content:[""],storageServiceId:[],storagePath:[""],isActive:[!1]})}ngOnInit(){this.activatedRoute.data.subscribe(({data:e,type:o})=>{this.type=o,"edit"===o?(this.scriptDetails=e,this.scriptForm.patchValue(e),this.scriptForm.controls.name.disable()):this.scriptEvents=(0,b.p)(e)}),this.scriptEventsOptions=this.scriptForm.controls.name.valueChanges.pipe((0,F.O)(""),(0,O.U)(e=>this.filterGroup(e))),this.loaded=!0}getControl(e){return this.scriptForm.controls[e]}goBack(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}submit(){if(!this.scriptForm.valid)return;const e=this.scriptForm.getRawValue();"edit"===this.type?(this.scriptDetails={...this.scriptDetails,...e},this.eventScriptService.update(e.name,e).subscribe(()=>this.goBack())):(this.scriptDetails=e,this.eventScriptService.create(e,void 0,e.name).subscribe(()=>this.goBack()))}filterGroup(e){return e?this.scriptEvents.map(o=>({name:o.name,endpoints:o.endpoints.filter(a=>a.toLowerCase().includes(e.toLowerCase()))})).filter(o=>o.endpoints.length>0):this.scriptEvents}}).\u0275fac=function(e){return new(e||r)(t.Y36(D.gz),t.Y36(s.qu),t.Y36(D.F0),t.Y36(J.qY))},r.\u0275cmp=t.Xpm({type:r,selectors:[["df-script-details"]],standalone:!0,features:[t.jDz],decls:27,vars:26,consts:[[1,"details-section",3,"formGroup","ngSubmit"],["subscriptSizing","dynamic",1,"dynamic-width"],["matInput","","formControlName","name",3,"matAutocomplete"],["autoGroup","matAutocomplete"],[3,"label",4,"ngFor","ngForOf"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formControlName","isActive",1,"dynamic-width"],[1,"full-width",3,"cache","type","storageServiceId","storagePath","content"],[1,"full-width","action-bar"],["mat-flat-button","","type","button",3,"click"],["mat-flat-button","","color","primary"],[3,"label"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"mat-form-field",1)(2,"mat-label"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"input",2),t.TgZ(6,"mat-autocomplete",null,3),t.YNc(8,I,2,2,"mat-optgroup",4),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"mat-form-field",1)(11,"mat-label"),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t.TgZ(14,"mat-select",5),t.YNc(15,L,2,2,"mat-option",6),t.qZA()(),t.TgZ(16,"mat-slide-toggle",7),t._uU(17),t.ALo(18,"transloco"),t.qZA(),t._UZ(19,"df-script-editor",8),t.TgZ(20,"div",9)(21,"button",10),t.NdJ("click",function(){return o.goBack()}),t._uU(22),t.ALo(23,"transloco"),t.qZA(),t.TgZ(24,"button",11),t._uU(25),t.ALo(26,"transloco"),t.qZA()()()),2&e){const a=t.MAs(7);t.Q6J("formGroup",o.scriptForm),t.xp6(3),t.Oqu(t.lcZ(4,14,"scripts.scriptName")),t.xp6(2),t.Q6J("matAutocomplete",a),t.xp6(3),t.Q6J("ngForOf",t.lcZ(9,16,o.scriptEventsOptions)),t.xp6(4),t.Oqu(t.lcZ(13,18,"scriptType")),t.xp6(3),t.Q6J("ngForOf",o.types),t.xp6(2),t.Oqu(t.lcZ(18,20,"active")),t.xp6(2),t.Q6J("cache",o.scriptForm.getRawValue().name)("type",o.getControl("type"))("storageServiceId",o.getControl("storageServiceId"))("storagePath",o.getControl("storagePath"))("content",o.getControl("content")),t.xp6(3),t.hij(" ",t.lcZ(23,22,"cancel")," "),t.xp6(3),t.hij(" ",t.lcZ(26,24,"save")," ")}},dependencies:[h.rP,h.Rr,l.Ot,c.lN,c.KE,c.hX,d.LD,d.gD,S.ey,S.Nv,v.ax,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.UX,s.sg,s.u,g.ot,g.lW,A.E,m.Bb,m.XC,m.ZL,Z.c,Z.Nt,v.Ov],encapsulation:2}),r);u=(0,y.gn)([(0,C.c)({checkProperties:!0})],u)}}]);
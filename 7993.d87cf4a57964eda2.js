"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[7993],{27993:(N,A,t)=>{t.r(A),t.d(A,{DfProfileComponent:()=>q});var h,n=t(97582),a=t(56223),i=t(26306),p=t(58504),d=t(92418),E=t(41089),M=t(32296),r=t(2032),g=t(64170),c=t(96814),D=t(2593),_=t(74104),C=t(42346),O=t(78791),e=t(65879),x=t(20352),v=t(81896),s=t(75911),m=t(49787),P=t(31303);function Z(u,l){1&u&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&u&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"userManagement.controls.currentPassword.errors.required")," "))}function T(u,l){if(1&u&&(e.TgZ(0,"mat-form-field",9)(1,"mat-label"),e._uU(2),e.ALo(3,"transloco"),e.qZA(),e._UZ(4,"input",17),e.YNc(5,Z,3,3,"mat-error",14),e.qZA()),2&u){const o=e.oxw();let f;e.xp6(2),e.Oqu(e.lcZ(3,2,"userManagement.controls.currentPassword.label")),e.xp6(3),e.Q6J("ngIf",null==(f=o.profileForm.get("currentPassword"))||null==f.errors?null:f.errors.required)}}function b(u,l){1&u&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&u&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"userManagement.controls.oldPassword.errors.required")," "))}function U(u,l){1&u&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&u&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"userManagement.controls.password.errors.required")," "))}function I(u,l){1&u&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&u&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"userManagement.controls.password.errors.length")," "))}function F(u,l){1&u&&(e.TgZ(0,"mat-error"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&u&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"userManagement.controls.confirmPassword.errors.match")," "))}let q=((h=class{constructor(l,o,f,w,L,y,Q){this.profileService=l,this.fb=o,this.activatedRoute=f,this.systemConfigDataService=w,this.breakPointService=L,this.translateService=y,this.passwordService=Q,this.loginAttribute="email",this.isSmallScreen=this.breakPointService.isSmallScreen,this.alertMsg="",this.showAlert=!1,this.alertType="error",this.needPassword=!1,this.profileForm=this.fb.group({profileDetailsGroup:this.fb.group({username:[""],email:["",a.kI.email],firstName:[""],lastName:[""],name:["",a.kI.required],phone:[""]})}),this.securityQuestionForm=this.fb.group({securityQuestion:[""],securityAnswer:[""]}),this.updatePasswordForm=this.fb.group({oldPassword:["",a.kI.required],newPassword:["",[a.kI.required,a.kI.minLength(6)]],confirmPassword:["",[a.kI.required,(0,d.t)("newPassword")]]})}ngOnInit(){this.activatedRoute.data.subscribe(({data:l})=>{this.currentProfile=l,this.profileForm.patchValue({profileDetailsGroup:{username:l.username,email:l.email,firstName:l.firstName,lastName:l.lastName,name:l.name,phone:l.phone}}),this.securityQuestionForm.patchValue({securityQuestion:l.securityQuestion})}),this.systemConfigDataService.environment$.subscribe(l=>{this.loginAttribute=l.authentication.loginAttribute,"username"===this.loginAttribute?this.profileForm.get("profileDetailsGroup.username")?.addValidators([a.kI.required]):this.profileForm.get("profileDetailsGroup.email")?.addValidators([a.kI.required])}),this.profileForm.get("profileDetailsGroup.email")?.valueChanges.subscribe(l=>{this.currentProfile.email!==l?(this.needPassword=!0,this.profileForm.addControl("currentPassword",new a.NI("",a.kI.required))):(this.needPassword=!1,this.profileForm.removeControl("currentPassword"))})}updateProfile(){if(this.profileForm.invalid||this.profileForm.pristine)return;const l={...this.currentProfile,...this.profileForm.controls.profileDetailsGroup.value};this.needPassword&&(l.currentPassword=this.profileForm.controls.currentPassword.value),this.profileService.saveProfile(l).pipe((0,i.K)(o=>(this.triggerAlert("error",o.error.error.message),(0,p._)(()=>new Error(o))))).subscribe(()=>{this.triggerAlert("success",this.translateService.translate("userManagement.profile.alerts.detailsUpdated"))})}triggerAlert(l,o){this.alertType=l,this.alertMsg=o,this.showAlert=!0}updateSecurityQuestion(){if(this.securityQuestionForm.invalid||this.securityQuestionForm.pristine)return;const l={...this.currentProfile,...this.securityQuestionForm.value};this.profileService.saveProfile(l).pipe((0,i.K)(o=>(this.triggerAlert("error",o.error.error.message),(0,p._)(()=>new Error(o))))).subscribe(()=>{this.triggerAlert("success",this.translateService.translate("userManagement.profile.alerts.securtyQuestionUpdated")),this.securityQuestionForm.controls.securityAnswer.setValue(null)})}updatePassword(){this.updatePasswordForm.invalid||this.updatePasswordForm.pristine||this.passwordService.updatePassword(this.updatePasswordForm.value).pipe((0,i.K)(l=>(this.triggerAlert("error",l.error.error.message),(0,p._)(()=>new Error(l))))).subscribe(()=>{this.triggerAlert("success",this.translateService.translate("userManagement.profile.alerts.passwordUpdated")),this.updatePasswordForm.reset()})}}).\u0275fac=function(l){return new(l||h)(e.Y36(x.Z),e.Y36(a.qu),e.Y36(v.gz),e.Y36(s.s),e.Y36(m.y),e.Y36(C.Vn),e.Y36(P.B))},h.\u0275cmp=e.Xpm({type:h,selectors:[["df-profile"]],standalone:!0,features:[e.jDz],decls:62,vars:57,consts:[["dynamicHeight","","mat-stretch-tabs","false","mat-align-tabs","start",3,"selectedTabChange"],[3,"label"],[1,"tab-container"],[3,"showAlert","alertType","alertClosed"],["name","user-profile-form",3,"formGroup","ngSubmit"],["formGroupName","profileDetailsGroup"],["appearance","fill",4,"ngIf"],["mat-flat-button","","color","primary","type","submit"],["name","security-question-form",3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","formControlName","securityQuestion"],["matInput","","formControlName","securityAnswer"],["name","update-password-form",3,"formGroup","ngSubmit"],["matInput","","type","password","formControlName","oldPassword"],[4,"ngIf"],["matInput","","type","password","formControlName","newPassword"],["matInput","","type","password","formControlName","confirmPassword"],["matInput","","type","password","formControlName","currentPassword"]],template:function(l,o){if(1&l&&(e.TgZ(0,"mat-tab-group",0),e.NdJ("selectedTabChange",function(){return o.showAlert=!1}),e.ALo(1,"async"),e.TgZ(2,"mat-tab",1),e.ALo(3,"transloco"),e.TgZ(4,"div",2)(5,"df-alert",3),e.NdJ("alertClosed",function(){return o.showAlert=!1}),e._uU(6),e.qZA(),e.TgZ(7,"form",4),e.NdJ("ngSubmit",function(){return o.updateProfile()}),e._UZ(8,"df-profile-details",5),e.YNc(9,T,6,4,"mat-form-field",6),e.TgZ(10,"button",7),e._uU(11),e.ALo(12,"transloco"),e.qZA()()()(),e.TgZ(13,"mat-tab",1),e.ALo(14,"transloco"),e.TgZ(15,"div",2)(16,"df-alert",3),e.NdJ("alertClosed",function(){return o.showAlert=!1}),e._uU(17),e.qZA(),e.TgZ(18,"form",8),e.NdJ("ngSubmit",function(){return o.updateSecurityQuestion()}),e.TgZ(19,"mat-form-field",9)(20,"mat-label"),e._uU(21),e.ALo(22,"transloco"),e.qZA(),e._UZ(23,"input",10),e.qZA(),e.TgZ(24,"mat-form-field",9)(25,"mat-label"),e._uU(26),e.ALo(27,"transloco"),e.qZA(),e._UZ(28,"input",11),e.qZA(),e.TgZ(29,"button",7),e._uU(30),e.ALo(31,"transloco"),e.qZA()()()(),e.TgZ(32,"mat-tab",1),e.ALo(33,"transloco"),e.TgZ(34,"div",2)(35,"df-alert",3),e.NdJ("alertClosed",function(){return o.showAlert=!1}),e._uU(36),e.qZA(),e.TgZ(37,"form",12),e.NdJ("ngSubmit",function(){return o.updatePassword()}),e.TgZ(38,"df-alert",3),e.NdJ("alertClosed",function(){return o.showAlert=!1}),e._uU(39),e.qZA(),e.TgZ(40,"mat-form-field",9)(41,"mat-label"),e._uU(42),e.ALo(43,"transloco"),e.qZA(),e._UZ(44,"input",13),e.YNc(45,b,3,3,"mat-error",14),e.qZA(),e.TgZ(46,"mat-form-field",9)(47,"mat-label"),e._uU(48),e.ALo(49,"transloco"),e.qZA(),e._UZ(50,"input",15),e.YNc(51,U,3,3,"mat-error",14),e.YNc(52,I,3,3,"mat-error",14),e.qZA(),e.TgZ(53,"mat-form-field",9)(54,"mat-label"),e._uU(55),e.ALo(56,"transloco"),e.qZA(),e._UZ(57,"input",16),e.YNc(58,F,3,3,"mat-error",14),e.qZA(),e.TgZ(59,"button",7),e._uU(60),e.ALo(61,"transloco"),e.qZA()()()()()),2&l){let f,w,L,y;e.Tol(e.lcZ(1,33,o.isSmallScreen)?"small":"large"),e.xp6(2),e.Q6J("label",e.lcZ(3,35,"userManagement.profile.tabs.details")),e.xp6(3),e.Q6J("showAlert",o.showAlert)("alertType",o.alertType),e.xp6(1),e.Oqu(o.alertMsg),e.xp6(1),e.Q6J("formGroup",o.profileForm),e.xp6(2),e.Q6J("ngIf",o.needPassword),e.xp6(2),e.hij(" ",e.lcZ(12,37,"save")," "),e.xp6(2),e.Q6J("label",e.lcZ(14,39,"userManagement.profile.tabs.securityQuestion")),e.xp6(3),e.Q6J("showAlert",o.showAlert)("alertType",o.alertType),e.xp6(1),e.Oqu(o.alertMsg),e.xp6(1),e.Q6J("formGroup",o.securityQuestionForm),e.xp6(3),e.Oqu(e.lcZ(22,41,"userManagement.controls.securityQuestion.label")),e.xp6(5),e.Oqu(e.lcZ(27,43,"userManagement.controls.securityAnswer.label")),e.xp6(4),e.hij(" ",e.lcZ(31,45,"save")," "),e.xp6(2),e.Q6J("label",e.lcZ(33,47,"userManagement.profile.tabs.password")),e.xp6(3),e.Q6J("showAlert",o.showAlert)("alertType",o.alertType),e.xp6(1),e.Oqu(o.alertMsg),e.xp6(1),e.Q6J("formGroup",o.updatePasswordForm),e.xp6(1),e.Q6J("showAlert",o.showAlert)("alertType",o.alertType),e.xp6(1),e.Oqu(o.alertMsg),e.xp6(3),e.Oqu(e.lcZ(43,49,"userManagement.controls.oldPassword.label")),e.xp6(3),e.Q6J("ngIf",null==(f=o.updatePasswordForm.get("oldPassword"))||null==f.errors?null:f.errors.required),e.xp6(3),e.Oqu(e.lcZ(49,51,"userManagement.controls.password.label")),e.xp6(3),e.Q6J("ngIf",null==(w=o.updatePasswordForm.get("newPassword"))||null==w.errors?null:w.errors.required),e.xp6(1),e.Q6J("ngIf",null==(L=o.updatePasswordForm.get("newPassword"))||null==L.errors?null:L.errors.minlength),e.xp6(3),e.Oqu(e.lcZ(56,53,"userManagement.controls.confirmPassword.label")),e.xp6(3),e.Q6J("ngIf",null==(y=o.updatePasswordForm.get("confirmPassword"))?null:y.hasError("doesNotMatch")),e.xp6(2),e.hij(" ",e.lcZ(61,55,"save")," ")}},dependencies:[_.Nh,_.uX,_.SP,E.v,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,a.x0,D.e,c.O5,g.lN,g.KE,g.hX,g.TO,r.c,r.Nt,M.ot,M.lW,c.Ov,C.Ot],encapsulation:2}),h);q=(0,n.gn)([(0,O.c)({checkProperties:!0})],q)},41089:(N,A,t)=>{t.d(A,{v:()=>g});var n=t(65879),a=t(96814),i=t(32296),p=t(45597),d=t(90590);function E(c,D){if(1&c){const _=n.EpF();n.TgZ(0,"button",5),n.NdJ("click",function(){n.CHM(_);const O=n.oxw(2);return n.KtG(O.dismissAlert())}),n.TgZ(1,"fa-icon",6),n._uU(2),n.qZA()()}if(2&c){const _=n.oxw(2);n.xp6(1),n.Q6J("icon",_.faXmark),n.xp6(1),n.Oqu("alerts.close")}}function M(c,D){if(1&c&&(n.TgZ(0,"div",1),n._UZ(1,"fa-icon",2),n.TgZ(2,"span",3),n.Hsn(3),n.qZA(),n.YNc(4,E,3,2,"button",4),n.qZA()),2&c){const _=n.oxw();n.Tol(_.alertType),n.xp6(1),n.Q6J("icon",_.icon),n.xp6(3),n.Q6J("ngIf",_.dismissible)}}const r=["*"];let g=(()=>{class c{constructor(){this.alertType="success",this.showAlert=!1,this.dismissible=!0,this.alertClosed=new n.vpe,this.faXmark=d.g82}dismissAlert(){this.alertClosed.emit()}get icon(){switch(this.alertType){case"success":return d.f8k;case"error":return d.$9F;case"warning":return d.RLE;default:return d.sqG}}}return c.\u0275fac=function(_){return new(_||c)},c.\u0275cmp=n.Xpm({type:c,selectors:[["df-alert"]],inputs:{alertType:"alertType",showAlert:"showAlert",dismissible:"dismissible"},outputs:{alertClosed:"alertClosed"},standalone:!0,features:[n.jDz],ngContentSelectors:r,decls:1,vars:1,consts:[["class","alert-container",3,"class",4,"ngIf"],[1,"alert-container"],["aria-hidden","true",1,"alert-icon",3,"icon"],["role","alert",1,"alert-message"],["mat-icon-button","","class","dismiss-alert",3,"click",4,"ngIf"],["mat-icon-button","",1,"dismiss-alert",3,"click"],[3,"icon"]],template:function(_,C){1&_&&(n.F$t(),n.YNc(0,M,5,4,"div",0)),2&_&&n.Q6J("ngIf",C.showAlert)},dependencies:[a.O5,i.ot,i.RK,p.uH,p.BN],styles:[".alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border:1px solid;border-radius:5px;box-shadow:0 0 5px #0003;color:#000}.alert-container[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{flex:1;padding:8px}.alert-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{padding:0 10px}.alert-container.success[_ngcontent-%COMP%]{border-color:#81c784;background-color:#c8e6c9}.alert-container.success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#4caf50}.alert-container.error[_ngcontent-%COMP%]{border-color:#e57373;background-color:#ffcdd2}.alert-container.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f44336}.alert-container.warning[_ngcontent-%COMP%]{border-color:#ffb74d;background-color:#ffe0b2}.alert-container.warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ff9800}.alert-container.info[_ngcontent-%COMP%]{border-color:#64b5f6;background-color:#bbdefb}.alert-container.info[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#2196f3}"]}),c})()},2593:(N,A,t)=>{t.d(A,{e:()=>v});var g,n=t(97582),a=t(96814),i=t(56223),p=t(64170),d=t(2032),E=t(42346),M=t(78791),r=t(65879);function c(s,m){1&s&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"transloco"),r.qZA()),2&s&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"userManagement.controls.username.errors.required")," "))}function D(s,m){1&s&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"transloco"),r.qZA()),2&s&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"userManagement.controls.email.errors.invalid")," "))}function _(s,m){1&s&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"transloco"),r.qZA()),2&s&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"userManagement.controls.email.errors.required")," "))}function C(s,m){1&s&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"transloco"),r.qZA()),2&s&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"userManagement.controls.firstName.errors.required")," "))}function O(s,m){1&s&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"transloco"),r.qZA()),2&s&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"userManagement.controls.lastName.errors.required")," "))}function e(s,m){1&s&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"transloco"),r.qZA()),2&s&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"userManagement.controls.displayName.errors.required")," "))}function x(s,m){1&s&&(r.TgZ(0,"mat-form-field",2)(1,"mat-label"),r._uU(2),r.ALo(3,"transloco"),r.qZA(),r._UZ(4,"input",10),r.qZA()),2&s&&(r.xp6(2),r.Oqu(r.lcZ(3,1,"userManagement.controls.phone.label")))}let v=((g=class{constructor(m){this.rootFormGroup=m}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.rootForm.markAllAsTouched()})}controlExists(m){return null!==this.rootForm.get(m)}isRequired(m){return!!this.rootForm.get(m)?.hasValidator(i.kI.required)}}).\u0275fac=function(m){return new(m||g)(r.Y36(i.sg))},g.\u0275cmp=r.Xpm({type:g,selectors:[["df-profile-details"]],standalone:!0,features:[r.jDz],decls:35,vars:26,consts:[["name","user-details-section",3,"formGroup"],["formGroupName","profileDetailsGroup"],["appearance","fill"],["matInput","","type","text","formControlName","username"],[4,"ngIf"],["matInput","","type","email","formControlName","email"],["matInput","","type","text","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","name"],["appearance","fill",4,"ngIf"],["matInput","","formControlName","phone"]],template:function(m,P){if(1&m&&(r.ynx(0,0)(1,1),r.TgZ(2,"mat-form-field",2)(3,"mat-label"),r._uU(4),r.ALo(5,"transloco"),r.ALo(6,"transloco"),r.qZA(),r._UZ(7,"input",3),r.YNc(8,c,3,3,"mat-error",4),r.qZA(),r.TgZ(9,"mat-form-field",2)(10,"mat-label"),r._uU(11),r.ALo(12,"transloco"),r.qZA(),r._UZ(13,"input",5),r.YNc(14,D,3,3,"mat-error",4),r.YNc(15,_,3,3,"mat-error",4),r.qZA(),r.TgZ(16,"mat-form-field",2)(17,"mat-label"),r._uU(18),r.ALo(19,"transloco"),r.qZA(),r._UZ(20,"input",6),r.YNc(21,C,3,3,"mat-error",4),r.qZA(),r.TgZ(22,"mat-form-field",2)(23,"mat-label"),r._uU(24),r.ALo(25,"transloco"),r.qZA(),r._UZ(26,"input",7),r.YNc(27,O,3,3,"mat-error",4),r.qZA(),r.TgZ(28,"mat-form-field",2)(29,"mat-label"),r._uU(30),r.ALo(31,"transloco"),r.qZA(),r._UZ(32,"input",8),r.YNc(33,e,3,3,"mat-error",4),r.qZA(),r.YNc(34,x,5,3,"mat-form-field",9),r.BQk()()),2&m){let h,Z,T,b,U,I;r.Q6J("formGroup",P.rootForm),r.xp6(4),r.AsE("",r.lcZ(5,14,"userManagement.controls.username.altLabel"),"",P.isRequired("profileDetailsGroup.username")?"":" "+r.lcZ(6,16,"userManagement.controls.username.optional"),""),r.xp6(4),r.Q6J("ngIf",null==(h=P.rootForm.get("profileDetailsGroup.username"))||null==h.errors?null:h.errors.required),r.xp6(3),r.hij(" ",r.lcZ(12,18,"userManagement.controls.email.label"),""),r.xp6(3),r.Q6J("ngIf",(null==(Z=P.rootForm.get("profileDetailsGroup.email"))||null==Z.errors?null:Z.errors.email)&&!(null!=(Z=P.rootForm.get("profileDetailsGroup.email"))&&null!=Z.errors&&Z.errors.required)),r.xp6(1),r.Q6J("ngIf",!(null!=(T=P.rootForm.get("profileDetailsGroup.email"))&&null!=T.errors&&T.errors.email)&&(null==(T=P.rootForm.get("profileDetailsGroup.email"))||null==T.errors?null:T.errors.required)),r.xp6(3),r.hij(" ",r.lcZ(19,20,"userManagement.controls.firstName.label"),""),r.xp6(3),r.Q6J("ngIf",null==(b=P.rootForm.get("profileDetailsGroup.firstName"))||null==b.errors?null:b.errors.required),r.xp6(3),r.Oqu(r.lcZ(25,22,"userManagement.controls.lastName.label")),r.xp6(3),r.Q6J("ngIf",null==(U=P.rootForm.get("profileDetailsGroup.lastName"))||null==U.errors?null:U.errors.required),r.xp6(3),r.Oqu(r.lcZ(31,24,"userManagement.controls.displayName.label")),r.xp6(3),r.Q6J("ngIf",null==(I=P.rootForm.get("profileDetailsGroup.name"))||null==I.errors?null:I.errors.required),r.xp6(1),r.Q6J("ngIf",P.controlExists("profileDetailsGroup.phone"))}},dependencies:[p.lN,p.KE,p.hX,p.TO,d.c,d.Nt,i.u5,i.Fj,i.JJ,i.JL,i.UX,i.sg,i.u,i.x0,E.Ot,a.O5],encapsulation:2}),g);v=(0,n.gn)([(0,M.c)({checkProperties:!0})],v)},92418:(N,A,t)=>{function n(a){return i=>{const p=i.parent;if(p){const d=p.get(a);if(d&&i.value!==d.value)return{doesNotMatch:!0}}return null}}t.d(A,{t:()=>n})}}]);
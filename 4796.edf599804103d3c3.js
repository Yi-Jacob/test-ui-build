"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[4796],{41089:(L,M,r)=>{r.d(M,{v:()=>A});var c=r(65879),l=r(96814),_=r(32296),u=r(45597),d=r(90590);function h(p,D){if(1&p){const C=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){c.CHM(C);const t=c.oxw(2);return c.KtG(t.dismissAlert())}),c.TgZ(1,"fa-icon",6),c._uU(2),c.qZA()()}if(2&p){const C=c.oxw(2);c.xp6(1),c.Q6J("icon",C.faXmark),c.xp6(1),c.Oqu("alerts.close")}}function P(p,D){if(1&p&&(c.TgZ(0,"div",1),c._UZ(1,"fa-icon",2),c.TgZ(2,"span",3),c.Hsn(3),c.qZA(),c.YNc(4,h,3,2,"button",4),c.qZA()),2&p){const C=c.oxw();c.Tol(C.alertType),c.xp6(1),c.Q6J("icon",C.icon),c.xp6(3),c.Q6J("ngIf",C.dismissible)}}const o=["*"];let A=(()=>{class p{constructor(){this.alertType="success",this.showAlert=!1,this.dismissible=!0,this.alertClosed=new c.vpe,this.faXmark=d.g82}dismissAlert(){this.alertClosed.emit()}get icon(){switch(this.alertType){case"success":return d.f8k;case"error":return d.$9F;case"warning":return d.RLE;default:return d.sqG}}}return p.\u0275fac=function(C){return new(C||p)},p.\u0275cmp=c.Xpm({type:p,selectors:[["df-alert"]],inputs:{alertType:"alertType",showAlert:"showAlert",dismissible:"dismissible"},outputs:{alertClosed:"alertClosed"},standalone:!0,features:[c.jDz],ngContentSelectors:o,decls:1,vars:1,consts:[["class","alert-container",3,"class",4,"ngIf"],[1,"alert-container"],["aria-hidden","true",1,"alert-icon",3,"icon"],["role","alert",1,"alert-message"],["mat-icon-button","","class","dismiss-alert",3,"click",4,"ngIf"],["mat-icon-button","",1,"dismiss-alert",3,"click"],[3,"icon"]],template:function(C,e){1&C&&(c.F$t(),c.YNc(0,P,5,4,"div",0)),2&C&&c.Q6J("ngIf",e.showAlert)},dependencies:[l.O5,_.ot,_.RK,u.uH,u.BN],styles:[".alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border:1px solid;border-radius:5px;box-shadow:0 0 5px #0003;color:#000}.alert-container[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{flex:1;padding:8px}.alert-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{padding:0 10px}.alert-container.success[_ngcontent-%COMP%]{border-color:#81c784;background-color:#c8e6c9}.alert-container.success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#4caf50}.alert-container.error[_ngcontent-%COMP%]{border-color:#e57373;background-color:#ffcdd2}.alert-container.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f44336}.alert-container.warning[_ngcontent-%COMP%]{border-color:#ffb74d;background-color:#ffe0b2}.alert-container.warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ff9800}.alert-container.info[_ngcontent-%COMP%]{border-color:#64b5f6;background-color:#bbdefb}.alert-container.info[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#2196f3}"]}),p})()},84870:(L,M,r)=>{r.d(M,{a:()=>K});var T,c=r(97582),l=r(96814),_=r(56223),u=r(64170),d=r(32296),h=r(25313),P=r(2032),o=r(82599),A=r(45597),p=r(3305),D=r(90590),C=r(42346),e=r(78791),t=r(65879);function x(m,a){if(1&m&&(t.TgZ(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._uU(4),t.ALo(5,"transloco"),t.qZA(),t.TgZ(6,"mat-panel-description"),t._uU(7),t.ALo(8,"transloco"),t.qZA()(),t.GkF(9,3),t.qZA()()),2&m){t.oxw();const s=t.MAs(3);t.xp6(4),t.hij(" ",t.lcZ(5,3,"lookupKeys.label"),""),t.xp6(3),t.Oqu(t.lcZ(8,5,"lookupKeys.desc")),t.xp6(2),t.Q6J("ngTemplateOutlet",s)}}function Z(m,a){1&m&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&m&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"name")," "))}function n(m,a){1&m&&(t.TgZ(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"input",18),t.qZA()()),2&m&&(t.Q6J("formGroupName",a.index),t.xp6(3),t.Oqu(t.lcZ(4,2,"name")))}function i(m,a){1&m&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&m&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"value")," "))}function E(m,a){1&m&&(t.TgZ(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"input",19),t.qZA()()),2&m&&(t.Q6J("formGroupName",a.index),t.xp6(3),t.Oqu(t.lcZ(4,2,"value")))}function v(m,a){1&m&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&m&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"private")," "))}function g(m,a){1&m&&(t.TgZ(0,"mat-cell",16),t._UZ(1,"mat-slide-toggle",20),t.ALo(2,"transloco"),t.qZA()),2&m&&(t.Q6J("formGroupName",a.index),t.xp6(1),t.uIk("aria-label",t.lcZ(2,2,"name")))}function O(m,a){if(1&m){const s=t.EpF();t.TgZ(0,"mat-header-cell")(1,"button",21),t.NdJ("click",function(){t.CHM(s);const U=t.oxw(2);return t.KtG(U.add())}),t.ALo(2,"transloco"),t._UZ(3,"fa-icon",22),t.qZA()()}if(2&m){const s=t.oxw(2);t.xp6(1),t.uIk("aria-label",t.lcZ(2,2,"newEntry")),t.xp6(2),t.Q6J("icon",s.faPlus)}}function y(m,a){if(1&m){const s=t.EpF();t.TgZ(0,"mat-cell",16)(1,"button",23),t.NdJ("click",function(){const I=t.CHM(s).index,B=t.oxw(2);return t.KtG(B.remove(I))}),t._UZ(2,"fa-icon",24),t.qZA()()}if(2&m){const s=a.index,f=t.oxw(2);t.Q6J("formGroupName",s),t.xp6(2),t.Q6J("icon",f.faTrashCan)}}function R(m,a){1&m&&t._UZ(0,"mat-header-row")}function N(m,a){1&m&&t._UZ(0,"mat-row")}function b(m,a){1&m&&(t.TgZ(0,"tr",25)(1,"td",26),t._uU(2),t.ALo(3,"transloco"),t.qZA()()),2&m&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lookupKeys.noKeys")," "))}function w(m,a){if(1&m&&(t.ynx(0,4)(1,5),t.TgZ(2,"mat-table",6),t.ynx(3,7),t.YNc(4,Z,3,3,"mat-header-cell",8),t.YNc(5,n,6,4,"mat-cell",9),t.BQk(),t.ynx(6,10),t.YNc(7,i,3,3,"mat-header-cell",8),t.YNc(8,E,6,4,"mat-cell",9),t.BQk(),t.ynx(9,11),t.YNc(10,v,3,3,"mat-header-cell",8),t.YNc(11,g,3,4,"mat-cell",9),t.BQk(),t.ynx(12,12),t.YNc(13,O,4,4,"mat-header-cell",8),t.YNc(14,y,3,2,"mat-cell",9),t.BQk(),t.YNc(15,R,1,0,"mat-header-row",13),t.YNc(16,N,1,0,"mat-row",14),t.YNc(17,b,4,3,"tr",15),t.qZA(),t.BQk()()),2&m){const s=t.oxw();t.Q6J("formGroup",s.rootForm),t.xp6(2),t.Q6J("dataSource",s.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns)}}let K=((T=class{constructor(a){this.rootFormGroup=a,this.displayedColumns=["name","value","private","actions"],this.faTrashCan=D.Vui,this.faPlus=D.r8p,this.showAccordion=!0}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.lookupKeys.markAllAsTouched()}),this.lookupKeys=this.rootForm.get("lookupKeys"),this.updateDataSource()}updateDataSource(){this.lookupKeys.controls.forEach(a=>{a.get("id")?.value&&a.get("name")?.disable()}),this.dataSource=new h.by(this.lookupKeys.controls)}add(){this.lookupKeys.push(new _.cw({name:new _.NI("",_.kI.required),value:new _.NI(""),private:new _.NI(!1)})),this.updateDataSource()}remove(a){this.lookupKeys.removeAt(a),this.updateDataSource()}}).\u0275fac=function(a){return new(a||T)(t.Y36(_.sg))},T.\u0275cmp=t.Xpm({type:T,selectors:[["df-lookup-keys"]],inputs:{showAccordion:"showAccordion"},standalone:!0,features:[t.jDz],decls:4,vars:2,consts:[[1,"lookup-keys-accordion"],[4,"ngIf","ngIfElse"],["lookupKeys",""],[3,"ngTemplateOutlet"],[3,"formGroup"],["formArrayName","lookupKeys"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","private"],["matColumnDef","actions","stickyEnd",""],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row no-data-row",4,"matNoDataRow"],[3,"formGroupName"],["subscriptSizing","dynamic"],["matInput","","formControlName","name"],["matInput","","formControlName","value"],["formControlName","private"],["mat-mini-fab","","color","primary","type","button",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",3,"click"],["size","xs",3,"icon"],[1,"mat-row","no-data-row"],["colspan","4",1,"mat-cell"]],template:function(a,s){if(1&a&&(t.TgZ(0,"div",0),t.YNc(1,x,10,7,"mat-accordion",1),t.YNc(2,w,18,4,"ng-template",null,2,t.W1O),t.qZA()),2&a){const f=t.MAs(3);t.xp6(1),t.Q6J("ngIf",s.showAccordion)("ngIfElse",f)}},dependencies:[_.u5,_.Fj,_.JJ,_.JL,_.UX,_.sg,_.u,_.x0,_.CE,l.O5,l.tP,u.lN,u.KE,u.hX,d.ot,d.RK,d.nh,h.p0,h.BZ,h.fO,h.as,h.w1,h.Dz,h.nj,h.ge,h.ev,h.XQ,h.Gk,h.Ee,P.c,P.Nt,o.rP,o.Rr,A.uH,A.BN,p.To,p.pp,p.ib,p.yz,p.yK,p.u4,C.Ot],styles:[".lookup-keys-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%], .mat-column-private[_ngcontent-%COMP%]{max-width:10%}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}"]}),T);K=(0,c.gn)([(0,e.c)({checkProperties:!0})],K)},2593:(L,M,r)=>{r.d(M,{e:()=>Z});var A,c=r(97582),l=r(96814),_=r(56223),u=r(64170),d=r(2032),h=r(42346),P=r(78791),o=r(65879);function p(n,i){1&n&&(o.TgZ(0,"mat-error"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"userManagement.controls.username.errors.required")," "))}function D(n,i){1&n&&(o.TgZ(0,"mat-error"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"userManagement.controls.email.errors.invalid")," "))}function C(n,i){1&n&&(o.TgZ(0,"mat-error"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"userManagement.controls.email.errors.required")," "))}function e(n,i){1&n&&(o.TgZ(0,"mat-error"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"userManagement.controls.firstName.errors.required")," "))}function t(n,i){1&n&&(o.TgZ(0,"mat-error"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"userManagement.controls.lastName.errors.required")," "))}function T(n,i){1&n&&(o.TgZ(0,"mat-error"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&n&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"userManagement.controls.displayName.errors.required")," "))}function x(n,i){1&n&&(o.TgZ(0,"mat-form-field",2)(1,"mat-label"),o._uU(2),o.ALo(3,"transloco"),o.qZA(),o._UZ(4,"input",10),o.qZA()),2&n&&(o.xp6(2),o.Oqu(o.lcZ(3,1,"userManagement.controls.phone.label")))}let Z=((A=class{constructor(i){this.rootFormGroup=i}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.rootForm.markAllAsTouched()})}controlExists(i){return null!==this.rootForm.get(i)}isRequired(i){return!!this.rootForm.get(i)?.hasValidator(_.kI.required)}}).\u0275fac=function(i){return new(i||A)(o.Y36(_.sg))},A.\u0275cmp=o.Xpm({type:A,selectors:[["df-profile-details"]],standalone:!0,features:[o.jDz],decls:35,vars:26,consts:[["name","user-details-section",3,"formGroup"],["formGroupName","profileDetailsGroup"],["appearance","fill"],["matInput","","type","text","formControlName","username"],[4,"ngIf"],["matInput","","type","email","formControlName","email"],["matInput","","type","text","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","name"],["appearance","fill",4,"ngIf"],["matInput","","formControlName","phone"]],template:function(i,E){if(1&i&&(o.ynx(0,0)(1,1),o.TgZ(2,"mat-form-field",2)(3,"mat-label"),o._uU(4),o.ALo(5,"transloco"),o.ALo(6,"transloco"),o.qZA(),o._UZ(7,"input",3),o.YNc(8,p,3,3,"mat-error",4),o.qZA(),o.TgZ(9,"mat-form-field",2)(10,"mat-label"),o._uU(11),o.ALo(12,"transloco"),o.qZA(),o._UZ(13,"input",5),o.YNc(14,D,3,3,"mat-error",4),o.YNc(15,C,3,3,"mat-error",4),o.qZA(),o.TgZ(16,"mat-form-field",2)(17,"mat-label"),o._uU(18),o.ALo(19,"transloco"),o.qZA(),o._UZ(20,"input",6),o.YNc(21,e,3,3,"mat-error",4),o.qZA(),o.TgZ(22,"mat-form-field",2)(23,"mat-label"),o._uU(24),o.ALo(25,"transloco"),o.qZA(),o._UZ(26,"input",7),o.YNc(27,t,3,3,"mat-error",4),o.qZA(),o.TgZ(28,"mat-form-field",2)(29,"mat-label"),o._uU(30),o.ALo(31,"transloco"),o.qZA(),o._UZ(32,"input",8),o.YNc(33,T,3,3,"mat-error",4),o.qZA(),o.YNc(34,x,5,3,"mat-form-field",9),o.BQk()()),2&i){let v,g,O,y,R,N;o.Q6J("formGroup",E.rootForm),o.xp6(4),o.AsE("",o.lcZ(5,14,"userManagement.controls.username.altLabel"),"",E.isRequired("profileDetailsGroup.username")?"":" "+o.lcZ(6,16,"userManagement.controls.username.optional"),""),o.xp6(4),o.Q6J("ngIf",null==(v=E.rootForm.get("profileDetailsGroup.username"))||null==v.errors?null:v.errors.required),o.xp6(3),o.hij(" ",o.lcZ(12,18,"userManagement.controls.email.label"),""),o.xp6(3),o.Q6J("ngIf",(null==(g=E.rootForm.get("profileDetailsGroup.email"))||null==g.errors?null:g.errors.email)&&!(null!=(g=E.rootForm.get("profileDetailsGroup.email"))&&null!=g.errors&&g.errors.required)),o.xp6(1),o.Q6J("ngIf",!(null!=(O=E.rootForm.get("profileDetailsGroup.email"))&&null!=O.errors&&O.errors.email)&&(null==(O=E.rootForm.get("profileDetailsGroup.email"))||null==O.errors?null:O.errors.required)),o.xp6(3),o.hij(" ",o.lcZ(19,20,"userManagement.controls.firstName.label"),""),o.xp6(3),o.Q6J("ngIf",null==(y=E.rootForm.get("profileDetailsGroup.firstName"))||null==y.errors?null:y.errors.required),o.xp6(3),o.Oqu(o.lcZ(25,22,"userManagement.controls.lastName.label")),o.xp6(3),o.Q6J("ngIf",null==(R=E.rootForm.get("profileDetailsGroup.lastName"))||null==R.errors?null:R.errors.required),o.xp6(3),o.Oqu(o.lcZ(31,24,"userManagement.controls.displayName.label")),o.xp6(3),o.Q6J("ngIf",null==(N=E.rootForm.get("profileDetailsGroup.name"))||null==N.errors?null:N.errors.required),o.xp6(1),o.Q6J("ngIf",E.controlExists("profileDetailsGroup.phone"))}},dependencies:[u.lN,u.KE,u.hX,u.TO,d.c,d.Nt,_.u5,_.Fj,_.JJ,_.JL,_.UX,_.sg,_.u,_.x0,h.Ot,l.O5],encapsulation:2}),A);Z=(0,c.gn)([(0,P.c)({checkProperties:!0})],Z)},31033:(L,M,r)=>{r.d(M,{U:()=>m});var x,c=r(97582),l=r(56223),_=r(32296),u=r(25313),d=r(2032),h=r(45597),P=r(3305),o=r(24630),A=r(90590),p=r(42346),D=r(96814),C=r(78791),e=r(65879),t=r(23680),T=r(64170);function Z(a,s){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"roles.app")," "))}function n(a,s){if(1&a&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&a){const f=s.$implicit;e.Q6J("value",f.name),e.xp6(1),e.hij(" ",f.name," ")}}function i(a,s){if(1&a&&(e.TgZ(0,"mat-cell",12)(1,"mat-form-field",13)(2,"mat-label"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e._UZ(5,"input",14),e.TgZ(6,"mat-autocomplete",15,16),e.YNc(8,n,2,2,"mat-option",17),e.qZA()()()),2&a){const f=s.index,U=e.MAs(7),I=e.oxw();e.Q6J("formGroupName",f),e.xp6(3),e.Oqu(e.lcZ(4,4,"roles.app")),e.xp6(2),e.Q6J("matAutocomplete",U),e.xp6(3),e.Q6J("ngForOf",I.availableApps)}}function E(a,s){1&a&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"roles.role")," "))}function v(a,s){if(1&a&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&a){const f=s.$implicit;e.Q6J("value",f.name),e.xp6(1),e.hij(" ",f.name," ")}}function g(a,s){if(1&a&&(e.TgZ(0,"mat-cell",12)(1,"mat-form-field",13)(2,"mat-label"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e._UZ(5,"input",19),e.TgZ(6,"mat-autocomplete",15,16),e.YNc(8,v,2,2,"mat-option",17),e.qZA()()()),2&a){const f=s.index,U=e.MAs(7),I=e.oxw();e.Q6J("formGroupName",f),e.xp6(3),e.Oqu(e.lcZ(4,4,"roles.role")),e.xp6(2),e.Q6J("matAutocomplete",U),e.xp6(3),e.Q6J("ngForOf",I.roles)}}function O(a,s){if(1&a){const f=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(f);const I=e.oxw(2);return e.KtG(I.add())}),e.ALo(1,"transloco"),e._UZ(2,"fa-icon",22),e.qZA()}if(2&a){const f=e.oxw(2);e.uIk("aria-label",e.lcZ(1,2,"newEntry")),e.xp6(2),e.Q6J("icon",f.faPlus)}}function y(a,s){if(1&a&&(e.TgZ(0,"mat-header-cell"),e.YNc(1,O,3,4,"button",20),e.qZA()),2&a){const f=e.oxw();e.xp6(1),e.Q6J("ngIf",f.showAddButton)}}function R(a,s){if(1&a){const f=e.EpF();e.TgZ(0,"mat-cell",12)(1,"button",23),e.NdJ("click",function(){const B=e.CHM(f).index,k=e.oxw();return e.KtG(k.remove(B))}),e._UZ(2,"fa-icon",24),e.qZA()()}if(2&a){const f=s.index,U=e.oxw();e.Q6J("formGroupName",f),e.xp6(2),e.Q6J("icon",U.faTrashCan)}}function N(a,s){1&a&&e._UZ(0,"mat-header-row")}function b(a,s){1&a&&e._UZ(0,"mat-row")}function w(a,s){1&a&&(e.TgZ(0,"tr",25)(1,"td",26),e._uU(2),e.ALo(3,"transloco"),e.qZA()()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"roles.noRoles")," "))}const K=function(a,s){return{assigned:a,total:s}};let m=((x=class{constructor(s){this.rootFormGroup=s,this.apps=[],this.roles=[],this.displayedColumns=["app","role","actions"],this.faTrashCan=A.Vui,this.faPlus=A.r8p}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.rootForm.markAllAsTouched()}),this.appRoles=this.rootForm.get("appRoles"),this.updateDataSource()}updateDataSource(){this.dataSource=new u.by(this.appRoles.controls)}get availableApps(){return this.apps.filter(s=>!this.appRoles.value.find(f=>f.app===s.name))}get showAddButton(){return this.appRoles.length<this.apps.length}get assignedApps(){return this.apps.length-this.appRoles.length}add(){this.appRoles.push(new l.cw({app:new l.NI("",l.kI.required),role:new l.NI("",l.kI.required)})),this.updateDataSource()}remove(s){this.appRoles.removeAt(s),this.updateDataSource()}}).\u0275fac=function(s){return new(s||x)(e.Y36(l.sg))},x.\u0275cmp=e.Xpm({type:x,selectors:[["df-user-app-roles"]],inputs:{apps:"apps",roles:"roles"},standalone:!0,features:[e.jDz],decls:25,vars:14,consts:[[1,"app-roles-keys-accordion"],[3,"formGroup"],["formArrayName","appRoles"],[3,"dataSource"],["matColumnDef","app"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"formGroupName"],["subscriptSizing","dynamic"],["matInput","","formControlName","app",3,"matAutocomplete"],["requireSelection",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","role",3,"matAutocomplete"],["mat-mini-fab","","color","primary","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary","type","button",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",3,"click"],["size","xs",3,"icon"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(s,f){1&s&&(e.TgZ(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),e._uU(5),e.ALo(6,"transloco"),e.qZA(),e.TgZ(7,"mat-panel-description"),e._uU(8),e.ALo(9,"transloco"),e.qZA()(),e.ynx(10,1)(11,2),e.TgZ(12,"mat-table",3),e.ynx(13,4),e.YNc(14,Z,3,3,"mat-header-cell",5),e.YNc(15,i,9,6,"mat-cell",6),e.BQk(),e.ynx(16,7),e.YNc(17,E,3,3,"mat-header-cell",5),e.YNc(18,g,9,6,"mat-cell",6),e.BQk(),e.ynx(19,8),e.YNc(20,y,2,1,"mat-header-cell",5),e.YNc(21,R,3,2,"mat-cell",6),e.BQk(),e.YNc(22,N,1,0,"mat-header-row",9),e.YNc(23,b,1,0,"mat-row",10),e.YNc(24,w,4,3,"tr",11),e.qZA(),e.BQk()(),e.qZA()()()),2&s&&(e.xp6(5),e.hij(" ",e.lcZ(6,6,"roles.label"),""),e.xp6(3),e.Oqu(e.xi3(9,8,"roles.appRoleAssigned",e.WLB(11,K,f.apps.length-f.availableApps.length,f.apps.length))),e.xp6(2),e.Q6J("formGroup",f.rootForm),e.xp6(2),e.Q6J("dataSource",f.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",f.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",f.displayedColumns))},dependencies:[l.u5,l.Fj,l.JJ,l.JL,l.UX,l.sg,l.u,l.x0,l.CE,o.Bb,o.XC,t.ey,o.ZL,_.ot,_.RK,_.nh,u.p0,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,u.Ee,d.c,d.Nt,T.KE,T.hX,h.uH,h.BN,P.To,P.pp,P.ib,P.yz,P.yK,P.u4,p.Ot,D.O5,D.ax],styles:[".app-roles-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%]{max-width:10%}"]}),x);m=(0,c.gn)([(0,C.c)({checkProperties:!0})],m)},73998:(L,M,r)=>{r.d(M,{x:()=>x});var T,c=r(97582),l=r(56223),_=r(92418),u=r(62651),d=r(42281),h=r(90590),P=r(78791),o=r(94664),A=r(22096),p=r(65879),D=r(81896),C=r(75911),e=r(49787),t=r(34909);let x=((T=class{constructor(n,i,E,v,g){this.fb=n,this.activatedRoute=i,this.systemConfigDataService=E,this.breakpointService=v,this.paywallService=g,this.loginAttribute="email",this.faEnvelope=h.FU$,this.type="create",this.isSmallScreen=this.breakpointService.isSmallScreen,this.alertMsg="",this.showAlert=!1,this.alertType="error",this.accessByTabs=[{control:"apps"},{control:"users"},{control:"services"},{control:"apidocs",label:"api-docs"},{control:"schema/data",label:"schema"},{control:"files"},{control:"scripts"},{control:"config"},{control:"packages",label:"package-manager"},{control:"limits"},{control:"scheduler"}],this.userForm=this.fb.group({profileDetailsGroup:this.fb.group({username:[""],email:["",l.kI.email],firstName:[""],lastName:[""],name:["",l.kI.required],phone:[""]}),isActive:[!0],tabs:this.buildTabs(),lookupKeys:this.fb.array([],[d.E]),appRoles:this.fb.array([])})}get cancelRoute(){let n=`/${u.Z.ADMIN_SETTINGS}/`;return"admins"===this.userType&&(n+=u.Z.ADMINS),"users"===this.userType&&(n+=u.Z.USERS),n}ngOnInit(){this.paywallService.activatePaywall("limit").pipe((0,o.w)(n=>n?this.paywallService.activatePaywall("service_report"):(0,A.of)(!1))).subscribe(n=>{n&&(this.accessByTabs=[])}),this.activatedRoute.data.subscribe(({type:n,data:i,apps:E,roles:v})=>{this.type=n,"users"===this.userType&&(this.apps=E.resource,this.roles=v.resource),"edit"===n?(this.currentProfile=i,this.userForm.patchValue({profileDetailsGroup:{username:i.username,email:i.email,firstName:i.firstName,lastName:i.lastName,name:i.name,phone:i.phone},isActive:i.isActive}),this.userForm.addControl("setPassword",new l.NI(!1)),this.userForm.controls.setPassword.valueChanges.subscribe(g=>{g?this.addPasswordControls():this.removePasswordControls()}),"admins"===this.userType&&(i.isRootAdmin&&this.userForm.removeControl("tabs"),i.userToAppToRoleByUserId.length>0&&(this.changeAllTabs(!1),i.role.accessibleTabs.forEach(g=>{const O=this.tabs.controls.find(y=>y.value.name===g);O&&O.patchValue({checked:!0})}))),"users"===this.userType&&i.userToAppToRoleByUserId.length>0&&i.userToAppToRoleByUserId.forEach(g=>{this.userForm.controls.appRoles.push(new l.cw({app:new l.NI(this.apps.find(O=>O.id===g.appId)?.name,[l.kI.required]),role:new l.NI(this.roles.find(O=>O.id===g.roleId)?.name,[l.kI.required])}))}),i.lookupByUserId.length>0&&i.lookupByUserId.forEach(g=>{this.userForm.controls.lookupKeys.push(new l.cw({name:new l.NI(g.name,[l.kI.required]),value:new l.NI(g.value),private:new l.NI(g.private),id:new l.NI(g.id)}))})):(this.userForm.addControl("pass-invite",new l.NI("",[l.kI.required])),this.userForm.controls["pass-invite"].valueChanges.subscribe(g=>{"password"===g?this.addPasswordControls():this.removePasswordControls()}))}),this.systemConfigDataService.environment$.subscribe(n=>{this.loginAttribute=n.authentication.loginAttribute,"username"===this.loginAttribute?this.userForm.get("profileDetailsGroup.username")?.addValidators([l.kI.required]):this.userForm.get("profileDetailsGroup.email")?.addValidators([l.kI.required])})}addPasswordControls(){this.userForm.addControl("password",new l.NI("",[l.kI.required,l.kI.minLength(6)])),this.userForm.addControl("confirmPassword",new l.NI("",[l.kI.required,(0,_.t)("password")]))}removePasswordControls(){this.userForm.removeControl("password"),this.userForm.removeControl("confirmPassword")}get tabs(){return this.userForm.controls.tabs}selectAllTabs(n){this.changeAllTabs(n.checked)}changeAllTabs(n){this.tabs.controls.forEach(i=>{i.patchValue({checked:n})})}get allTabsSelected(){return this.tabs.controls.every(n=>n.value.checked)}buildTabs(){const n=this.accessByTabs.map(i=>this.fb.group({name:i.control,title:i.label||i.control,checked:!0}));return this.fb.array(n)}triggerAlert(n,i){this.alertType=n,this.alertMsg=i,this.showAlert=!0}}).\u0275fac=function(n){return new(n||T)(p.Y36(l.qu),p.Y36(D.gz),p.Y36(C.s),p.Y36(e.y),p.Y36(t._))},T.\u0275cmp=p.Xpm({type:T,selectors:[["df-user-details"]],decls:0,vars:0,template:function(n,i){},encapsulation:2}),T);x=(0,c.gn)([(0,P.c)({checkProperties:!0})],x)},54475:(L,M,r)=>{r.d(M,{n:()=>l});const c=[{regex:/Duplicate entry '([^']+)' for key 'user_email_unique'/,message:"alerts.duplicateEmail"}];function l(_){if(!_)return"alert.genericError";const u=c.find(d=>d.regex.test(_));return u?u.message:_}},92418:(L,M,r)=>{function c(l){return _=>{const u=_.parent;if(u){const d=u.get(l);if(d&&_.value!==d.value)return{doesNotMatch:!0}}return null}}r.d(M,{t:()=>c})},42281:(L,M,r)=>{r.d(M,{E:()=>l});var c=r(56223);const l=_=>{const u=new Map,d=_;function h(o){d.at(o).get("name")?.setErrors({notUnique:!0})}return d.controls.forEach((o,A)=>{if(!(o instanceof c.cw))return;const p=o.get("name");if(!p)return;const D=p.value;D&&(u.has(D)?(h(u.get(D)??0),h(A)):(u.set(D,A),function P(o){const p=d.at(o).get("name"),D=p?.errors;D&&(delete D.notUnique,p.setErrors(Object.keys(D).length?D:null))}(A)))}),null}}}]);